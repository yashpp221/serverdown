// Copyright 2014 Google Inc. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
//     You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//     See the License for the specific language governing permissions and
// limitations under the License.

!function() {
    var a = {}
      , b = {};
    !function(a, b) {
        function c(a) {
            if ("number" == typeof a)
                return a;
            var b = {};
            for (var c in a)
                b[c] = a[c];
            return b
        }
        function d() {
            this._delay = 0,
            this._endDelay = 0,
            this._fill = "none",
            this._iterationStart = 0,
            this._iterations = 1,
            this._duration = 0,
            this._playbackRate = 1,
            this._direction = "normal",
            this._easing = "linear",
            this._easingFunction = x
        }
        function e() {
            return a.isDeprecated("Invalid timing inputs", "2016-03-02", "TypeError exceptions will be thrown instead.", !0)
        }
        function f(b, c, e) {
            var f = new d;
            return c && (f.fill = "both",
            f.duration = "auto"),
            "number" != typeof b || isNaN(b) ? void 0 !== b && Object.getOwnPropertyNames(b).forEach(function(c) {
                if ("auto" != b[c]) {
                    if (("number" == typeof f[c] || "duration" == c) && ("number" != typeof b[c] || isNaN(b[c])))
                        return;
                    if ("fill" == c && -1 == v.indexOf(b[c]))
                        return;
                    if ("direction" == c && -1 == w.indexOf(b[c]))
                        return;
                    if ("playbackRate" == c && 1 !== b[c] && a.isDeprecated("AnimationEffectTiming.playbackRate", "2014-11-28", "Use Animation.playbackRate instead."))
                        return;
                    f[c] = b[c]
                }
            }) : f.duration = b,
            f
        }
        function g(a) {
            return "number" == typeof a && (a = isNaN(a) ? {
                duration: 0
            } : {
                duration: a
            }),
            a
        }
        function h(b, c) {
            return b = a.numericTimingToObject(b),
            f(b, c)
        }
        function i(a, b, c, d) {
            return a < 0 || a > 1 || c < 0 || c > 1 ? x : function(e) {
                function f(a, b, c) {
                    return 3 * a * (1 - c) * (1 - c) * c + 3 * b * (1 - c) * c * c + c * c * c
                }
                if (e <= 0) {
                    var g = 0;
                    return a > 0 ? g = b / a : !b && c > 0 && (g = d / c),
                    g * e
                }
                if (e >= 1) {
                    var h = 0;
                    return c < 1 ? h = (d - 1) / (c - 1) : 1 == c && a < 1 && (h = (b - 1) / (a - 1)),
                    1 + h * (e - 1)
                }
                for (var i = 0, j = 1; i < j; ) {
                    var k = (i + j) / 2
                      , l = f(a, c, k);
                    if (Math.abs(e - l) < 1e-5)
                        return f(b, d, k);
                    l < e ? i = k : j = k
                }
                return f(b, d, k)
            }
        }
        function j(a, b) {
            return function(c) {
                if (c >= 1)
                    return 1;
                var d = 1 / a;
                return (c += b * d) - c % d
            }
        }
        function k(a) {
            C || (C = document.createElement("div").style),
            C.animationTimingFunction = "",
            C.animationTimingFunction = a;
            var b = C.animationTimingFunction;
            if ("" == b && e())
                throw new TypeError(a + " is not a valid value for easing");
            return b
        }
        function l(a) {
            if ("linear" == a)
                return x;
            var b = E.exec(a);
            if (b)
                return i.apply(this, b.slice(1).map(Number));
            var c = F.exec(a);
            if (c)
                return j(Number(c[1]), A);
            var d = G.exec(a);
            return d ? j(Number(d[1]), {
                start: y,
                middle: z,
                end: A
            }[d[2]]) : B[a] || x
        }
        function m(a) {
            return Math.abs(n(a) / a.playbackRate)
        }
        function n(a) {
            return 0 === a.duration || 0 === a.iterations ? 0 : a.duration * a.iterations
        }
        function o(a, b, c) {
            if (null == b)
                return H;
            var d = c.delay + a + c.endDelay;
            return b < Math.min(c.delay, d) ? I : b >= Math.min(c.delay + a, d) ? J : K
        }
        function p(a, b, c, d, e) {
            switch (d) {
            case I:
                return "backwards" == b || "both" == b ? 0 : null;
            case K:
                return c - e;
            case J:
                return "forwards" == b || "both" == b ? a : null;
            case H:
                return null
            }
        }
        function q(a, b, c, d, e) {
            var f = e;
            return 0 === a ? b !== I && (f += c) : f += d / a,
            f
        }
        function r(a, b, c, d, e, f) {
            var g = a === 1 / 0 ? b % 1 : a % 1;
            return 0 !== g || c !== J || 0 === d || 0 === e && 0 !== f || (g = 1),
            g
        }
        function s(a, b, c, d) {
            return a === J && b === 1 / 0 ? 1 / 0 : 1 === c ? Math.floor(d) - 1 : Math.floor(d)
        }
        function t(a, b, c) {
            var d = a;
            if ("normal" !== a && "reverse" !== a) {
                var e = b;
                "alternate-reverse" === a && (e += 1),
                d = "normal",
                e !== 1 / 0 && e % 2 != 0 && (d = "reverse")
            }
            return "normal" === d ? c : 1 - c
        }
        function u(a, b, c) {
            var d = o(a, b, c)
              , e = p(a, c.fill, b, d, c.delay);
            if (null === e)
                return null;
            var f = q(c.duration, d, c.iterations, e, c.iterationStart)
              , g = r(f, c.iterationStart, d, c.iterations, e, c.duration)
              , h = s(d, c.iterations, g, f)
              , i = t(c.direction, h, g);
            return c._easingFunction(i)
        }
        var v = "backwards|forwards|both|none".split("|")
          , w = "reverse|alternate|alternate-reverse".split("|")
          , x = function(a) {
            return a
        };
        d.prototype = {
            _setMember: function(b, c) {
                this["_" + b] = c,
                this._effect && (this._effect._timingInput[b] = c,
                this._effect._timing = a.normalizeTimingInput(this._effect._timingInput),
                this._effect.activeDuration = a.calculateActiveDuration(this._effect._timing),
                this._effect._animation && this._effect._animation._rebuildUnderlyingAnimation())
            },
            get playbackRate() {
                return this._playbackRate
            },
            set delay(a) {
                this._setMember("delay", a)
            },
            get delay() {
                return this._delay
            },
            set endDelay(a) {
                this._setMember("endDelay", a)
            },
            get endDelay() {
                return this._endDelay
            },
            set fill(a) {
                this._setMember("fill", a)
            },
            get fill() {
                return this._fill
            },
            set iterationStart(a) {
                if ((isNaN(a) || a < 0) && e())
                    throw new TypeError("iterationStart must be a non-negative number, received: " + a);
                this._setMember("iterationStart", a)
            },
            get iterationStart() {
                return this._iterationStart
            },
            set duration(a) {
                if ("auto" != a && (isNaN(a) || a < 0) && e())
                    throw new TypeError("duration must be non-negative or auto, received: " + a);
                this._setMember("duration", a)
            },
            get duration() {
                return this._duration
            },
            set direction(a) {
                this._setMember("direction", a)
            },
            get direction() {
                return this._direction
            },
            set easing(a) {
                this._easingFunction = l(k(a)),
                this._setMember("easing", a)
            },
            get easing() {
                return this._easing
            },
            set iterations(a) {
                if ((isNaN(a) || a < 0) && e())
                    throw new TypeError("iterations must be non-negative, received: " + a);
                this._setMember("iterations", a)
            },
            get iterations() {
                return this._iterations
            }
        };
        var y = 1
          , z = .5
          , A = 0
          , B = {
            ease: i(.25, .1, .25, 1),
            "ease-in": i(.42, 0, 1, 1),
            "ease-out": i(0, 0, .58, 1),
            "ease-in-out": i(.42, 0, .58, 1),
            "step-start": j(1, y),
            "step-middle": j(1, z),
            "step-end": j(1, A)
        }
          , C = null
          , D = "\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*"
          , E = new RegExp("cubic-bezier\\(" + D + "," + D + "," + D + "," + D + "\\)")
          , F = /steps\(\s*(\d+)\s*\)/
          , G = /steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/
          , H = 0
          , I = 1
          , J = 2
          , K = 3;
        a.cloneTimingInput = c,
        a.makeTiming = f,
        a.numericTimingToObject = g,
        a.normalizeTimingInput = h,
        a.calculateActiveDuration = m,
        a.calculateIterationProgress = u,
        a.calculatePhase = o,
        a.normalizeEasing = k,
        a.parseEasingFunction = l
    }(a),
    function(a, b) {
        function c(a, b) {
            return a in k ? k[a][b] || b : b
        }
        function d(a) {
            return "display" === a || 0 === a.lastIndexOf("animation", 0) || 0 === a.lastIndexOf("transition", 0)
        }
        function e(a, b, e) {
            if (!d(a)) {
                var f = h[a];
                if (f) {
                    i.style[a] = b;
                    for (var g in f) {
                        var j = f[g]
                          , k = i.style[j];
                        e[j] = c(j, k)
                    }
                } else
                    e[a] = c(a, b)
            }
        }
        function f(a) {
            var b = [];
            for (var c in a)
                if (!(c in ["easing", "offset", "composite"])) {
                    var d = a[c];
                    Array.isArray(d) || (d = [d]);
                    for (var e, f = d.length, g = 0; g < f; g++)
                        e = {},
                        e.offset = "offset"in a ? a.offset : 1 == f ? 1 : g / (f - 1),
                        "easing"in a && (e.easing = a.easing),
                        "composite"in a && (e.composite = a.composite),
                        e[c] = d[g],
                        b.push(e)
                }
            return b.sort(function(a, b) {
                return a.offset - b.offset
            }),
            b
        }
        function g(b) {
            function c() {
                var a = d.length;
                null == d[a - 1].offset && (d[a - 1].offset = 1),
                a > 1 && null == d[0].offset && (d[0].offset = 0);
                for (var b = 0, c = d[0].offset, e = 1; e < a; e++) {
                    var f = d[e].offset;
                    if (null != f) {
                        for (var g = 1; g < e - b; g++)
                            d[b + g].offset = c + (f - c) * g / (e - b);
                        b = e,
                        c = f
                    }
                }
            }
            if (null == b)
                return [];
            window.Symbol && Symbol.iterator && Array.prototype.from && b[Symbol.iterator] && (b = Array.from(b)),
            Array.isArray(b) || (b = f(b));
            for (var d = b.map(function(b) {
                var c = {};
                for (var d in b) {
                    var f = b[d];
                    if ("offset" == d) {
                        if (null != f) {
                            if (f = Number(f),
                            !isFinite(f))
                                throw new TypeError("Keyframe offsets must be numbers.");
                            if (f < 0 || f > 1)
                                throw new TypeError("Keyframe offsets must be between 0 and 1.")
                        }
                    } else if ("composite" == d) {
                        if ("add" == f || "accumulate" == f)
                            throw {
                                type: DOMException.NOT_SUPPORTED_ERR,
                                name: "NotSupportedError",
                                message: "add compositing is not supported"
                            };
                        if ("replace" != f)
                            throw new TypeError("Invalid composite mode " + f + ".")
                    } else
                        f = "easing" == d ? a.normalizeEasing(f) : "" + f;
                    e(d, f, c)
                }
                return void 0 == c.offset && (c.offset = null),
                void 0 == c.easing && (c.easing = "linear"),
                c
            }), g = !0, h = -1 / 0, i = 0; i < d.length; i++) {
                var j = d[i].offset;
                if (null != j) {
                    if (j < h)
                        throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");
                    h = j
                } else
                    g = !1
            }
            return d = d.filter(function(a) {
                return a.offset >= 0 && a.offset <= 1
            }),
            g || c(),
            d
        }
        var h = {
            background: ["backgroundImage", "backgroundPosition", "backgroundSize", "backgroundRepeat", "backgroundAttachment", "backgroundOrigin", "backgroundClip", "backgroundColor"],
            border: ["borderTopColor", "borderTopStyle", "borderTopWidth", "borderRightColor", "borderRightStyle", "borderRightWidth", "borderBottomColor", "borderBottomStyle", "borderBottomWidth", "borderLeftColor", "borderLeftStyle", "borderLeftWidth"],
            borderBottom: ["borderBottomWidth", "borderBottomStyle", "borderBottomColor"],
            borderColor: ["borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor"],
            borderLeft: ["borderLeftWidth", "borderLeftStyle", "borderLeftColor"],
            borderRadius: ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
            borderRight: ["borderRightWidth", "borderRightStyle", "borderRightColor"],
            borderTop: ["borderTopWidth", "borderTopStyle", "borderTopColor"],
            borderWidth: ["borderTopWidth", "borderRightWidth", "borderBottomWidth", "borderLeftWidth"],
            flex: ["flexGrow", "flexShrink", "flexBasis"],
            font: ["fontFamily", "fontSize", "fontStyle", "fontVariant", "fontWeight", "lineHeight"],
            margin: ["marginTop", "marginRight", "marginBottom", "marginLeft"],
            outline: ["outlineColor", "outlineStyle", "outlineWidth"],
            padding: ["paddingTop", "paddingRight", "paddingBottom", "paddingLeft"]
        }
          , i = document.createElementNS("http://www.w3.org/1999/xhtml", "div")
          , j = {
            thin: "1px",
            medium: "3px",
            thick: "5px"
        }
          , k = {
            borderBottomWidth: j,
            borderLeftWidth: j,
            borderRightWidth: j,
            borderTopWidth: j,
            fontSize: {
                "xx-small": "60%",
                "x-small": "75%",
                small: "89%",
                medium: "100%",
                large: "120%",
                "x-large": "150%",
                "xx-large": "200%"
            },
            fontWeight: {
                normal: "400",
                bold: "700"
            },
            outlineWidth: j,
            textShadow: {
                none: "0px 0px 0px transparent"
            },
            boxShadow: {
                none: "0px 0px 0px 0px transparent"
            }
        };
        a.convertToArrayForm = f,
        a.normalizeKeyframes = g
    }(a),
    function(a) {
        var b = {};
        a.isDeprecated = function(a, c, d, e) {
            var f = e ? "are" : "is"
              , g = new Date
              , h = new Date(c);
            return h.setMonth(h.getMonth() + 3),
            !(g < h && (a in b || console.warn("Web Animations: " + a + " " + f + " deprecated and will stop working on " + h.toDateString() + ". " + d),
            b[a] = !0,
            1))
        }
        ,
        a.deprecated = function(b, c, d, e) {
            var f = e ? "are" : "is";
            if (a.isDeprecated(b, c, d, e))
                throw new Error(b + " " + f + " no longer supported. " + d)
        }
    }(a),
    function() {
        if (document.documentElement.animate) {
            var c = document.documentElement.animate([], 0)
              , d = !0;
            if (c && (d = !1,
            "play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(a) {
                void 0 === c[a] && (d = !0)
            })),
            !d)
                return
        }
        !function(a, b, c) {
            function d(a) {
                for (var b = {}, c = 0; c < a.length; c++)
                    for (var d in a[c])
                        if ("offset" != d && "easing" != d && "composite" != d) {
                            var e = {
                                offset: a[c].offset,
                                easing: a[c].easing,
                                value: a[c][d]
                            };
                            b[d] = b[d] || [],
                            b[d].push(e)
                        }
                for (var f in b) {
                    var g = b[f];
                    if (0 != g[0].offset || 1 != g[g.length - 1].offset)
                        throw {
                            type: DOMException.NOT_SUPPORTED_ERR,
                            name: "NotSupportedError",
                            message: "Partial keyframes are not supported"
                        }
                }
                return b
            }
            function e(c) {
                var d = [];
                for (var e in c)
                    for (var f = c[e], g = 0; g < f.length - 1; g++) {
                        var h = g
                          , i = g + 1
                          , j = f[h].offset
                          , k = f[i].offset
                          , l = j
                          , m = k;
                        0 == g && (l = -1 / 0,
                        0 == k && (i = h)),
                        g == f.length - 2 && (m = 1 / 0,
                        1 == j && (h = i)),
                        d.push({
                            applyFrom: l,
                            applyTo: m,
                            startOffset: f[h].offset,
                            endOffset: f[i].offset,
                            easingFunction: a.parseEasingFunction(f[h].easing),
                            property: e,
                            interpolation: b.propertyInterpolation(e, f[h].value, f[i].value)
                        })
                    }
                return d.sort(function(a, b) {
                    return a.startOffset - b.startOffset
                }),
                d
            }
            b.convertEffectInput = function(c) {
                var f = a.normalizeKeyframes(c)
                  , g = d(f)
                  , h = e(g);
                return function(a, c) {
                    if (null != c)
                        h.filter(function(a) {
                            return c >= a.applyFrom && c < a.applyTo
                        }).forEach(function(d) {
                            var e = c - d.startOffset
                              , f = d.endOffset - d.startOffset
                              , g = 0 == f ? 0 : d.easingFunction(e / f);
                            b.apply(a, d.property, d.interpolation(g))
                        });
                    else
                        for (var d in g)
                            "offset" != d && "easing" != d && "composite" != d && b.clear(a, d)
                }
            }
        }(a, b),
        function(a, b, c) {
            function d(a) {
                return a.replace(/-(.)/g, function(a, b) {
                    return b.toUpperCase()
                })
            }
            function e(a, b, c) {
                h[c] = h[c] || [],
                h[c].push([a, b])
            }
            function f(a, b, c) {
                for (var f = 0; f < c.length; f++) {
                    e(a, b, d(c[f]))
                }
            }
            function g(c, e, f) {
                var g = c;
                /-/.test(c) && !a.isDeprecated("Hyphenated property names", "2016-03-22", "Use camelCase instead.", !0) && (g = d(c)),
                "initial" != e && "initial" != f || ("initial" == e && (e = i[g]),
                "initial" == f && (f = i[g]));
                for (var j = e == f ? [] : h[g], k = 0; j && k < j.length; k++) {
                    var l = j[k][0](e)
                      , m = j[k][0](f);
                    if (void 0 !== l && void 0 !== m) {
                        var n = j[k][1](l, m);
                        if (n) {
                            var o = b.Interpolation.apply(null, n);
                            return function(a) {
                                return 0 == a ? e : 1 == a ? f : o(a)
                            }
                        }
                    }
                }
                return b.Interpolation(!1, !0, function(a) {
                    return a ? f : e
                })
            }
            var h = {};
            b.addPropertiesHandler = f;
            var i = {
                backgroundColor: "transparent",
                backgroundPosition: "0% 0%",
                borderBottomColor: "currentColor",
                borderBottomLeftRadius: "0px",
                borderBottomRightRadius: "0px",
                borderBottomWidth: "3px",
                borderLeftColor: "currentColor",
                borderLeftWidth: "3px",
                borderRightColor: "currentColor",
                borderRightWidth: "3px",
                borderSpacing: "2px",
                borderTopColor: "currentColor",
                borderTopLeftRadius: "0px",
                borderTopRightRadius: "0px",
                borderTopWidth: "3px",
                bottom: "auto",
                clip: "rect(0px, 0px, 0px, 0px)",
                color: "black",
                fontSize: "100%",
                fontWeight: "400",
                height: "auto",
                left: "auto",
                letterSpacing: "normal",
                lineHeight: "120%",
                marginBottom: "0px",
                marginLeft: "0px",
                marginRight: "0px",
                marginTop: "0px",
                maxHeight: "none",
                maxWidth: "none",
                minHeight: "0px",
                minWidth: "0px",
                opacity: "1.0",
                outlineColor: "invert",
                outlineOffset: "0px",
                outlineWidth: "3px",
                paddingBottom: "0px",
                paddingLeft: "0px",
                paddingRight: "0px",
                paddingTop: "0px",
                right: "auto",
                strokeDasharray: "none",
                strokeDashoffset: "0px",
                textIndent: "0px",
                textShadow: "0px 0px 0px transparent",
                top: "auto",
                transform: "",
                verticalAlign: "0px",
                visibility: "visible",
                width: "auto",
                wordSpacing: "normal",
                zIndex: "auto"
            };
            b.propertyInterpolation = g
        }(a, b),
        function(a, b, c) {
            function d(b) {
                var c = a.calculateActiveDuration(b)
                  , d = function(d) {
                    return a.calculateIterationProgress(c, d, b)
                };
                return d._totalDuration = b.delay + c + b.endDelay,
                d
            }
            b.KeyframeEffect = function(c, e, f, g) {
                var h, i = d(a.normalizeTimingInput(f)), j = b.convertEffectInput(e), k = function() {
                    j(c, h)
                };
                return k._update = function(a) {
                    return null !== (h = i(a))
                }
                ,
                k._clear = function() {
                    j(c, null)
                }
                ,
                k._hasSameTarget = function(a) {
                    return c === a
                }
                ,
                k._target = c,
                k._totalDuration = i._totalDuration,
                k._id = g,
                k
            }
        }(a, b),
        function(a, b) {
            function c(a, b) {
                return !(!b.namespaceURI || -1 == b.namespaceURI.indexOf("/svg")) && (g in a || (a[g] = /Trident|MSIE|IEMobile|Edge|Android 4/i.test(a.navigator.userAgent)),
                a[g])
            }
            function d(a, b, c) {
                c.enumerable = !0,
                c.configurable = !0,
                Object.defineProperty(a, b, c)
            }
            function e(a) {
                this._element = a,
                this._surrogateStyle = document.createElementNS("http://www.w3.org/1999/xhtml", "div").style,
                this._style = a.style,
                this._length = 0,
                this._isAnimatedProperty = {},
                this._updateSvgTransformAttr = c(window, a),
                this._savedTransformAttr = null;
                for (var b = 0; b < this._style.length; b++) {
                    var d = this._style[b];
                    this._surrogateStyle[d] = this._style[d]
                }
                this._updateIndices()
            }
            function f(a) {
                if (!a._webAnimationsPatchedStyle) {
                    var b = new e(a);
                    try {
                        d(a, "style", {
                            get: function() {
                                return b
                            }
                        })
                    } catch (b) {
                        a.style._set = function(b, c) {
                            a.style[b] = c
                        }
                        ,
                        a.style._clear = function(b) {
                            a.style[b] = ""
                        }
                    }
                    a._webAnimationsPatchedStyle = a.style
                }
            }
            var g = "_webAnimationsUpdateSvgTransformAttr"
              , h = {
                cssText: 1,
                length: 1,
                parentRule: 1
            }
              , i = {
                getPropertyCSSValue: 1,
                getPropertyPriority: 1,
                getPropertyValue: 1,
                item: 1,
                removeProperty: 1,
                setProperty: 1
            }
              , j = {
                removeProperty: 1,
                setProperty: 1
            };
            e.prototype = {
                get cssText() {
                    return this._surrogateStyle.cssText
                },
                set cssText(a) {
                    for (var b = {}, c = 0; c < this._surrogateStyle.length; c++)
                        b[this._surrogateStyle[c]] = !0;
                    this._surrogateStyle.cssText = a,
                    this._updateIndices();
                    for (var c = 0; c < this._surrogateStyle.length; c++)
                        b[this._surrogateStyle[c]] = !0;
                    for (var d in b)
                        this._isAnimatedProperty[d] || this._style.setProperty(d, this._surrogateStyle.getPropertyValue(d))
                },
                get length() {
                    return this._surrogateStyle.length
                },
                get parentRule() {
                    return this._style.parentRule
                },
                _updateIndices: function() {
                    for (; this._length < this._surrogateStyle.length; )
                        Object.defineProperty(this, this._length, {
                            configurable: !0,
                            enumerable: !1,
                            get: function(a) {
                                return function() {
                                    return this._surrogateStyle[a]
                                }
                            }(this._length)
                        }),
                        this._length++;
                    for (; this._length > this._surrogateStyle.length; )
                        this._length--,
                        Object.defineProperty(this, this._length, {
                            configurable: !0,
                            enumerable: !1,
                            value: void 0
                        })
                },
                _set: function(b, c) {
                    this._style[b] = c,
                    this._isAnimatedProperty[b] = !0,
                    this._updateSvgTransformAttr && "transform" == a.unprefixedPropertyName(b) && (null == this._savedTransformAttr && (this._savedTransformAttr = this._element.getAttribute("transform")),
                    this._element.setAttribute("transform", a.transformToSvgMatrix(c)))
                },
                _clear: function(b) {
                    this._style[b] = this._surrogateStyle[b],
                    this._updateSvgTransformAttr && "transform" == a.unprefixedPropertyName(b) && (this._savedTransformAttr ? this._element.setAttribute("transform", this._savedTransformAttr) : this._element.removeAttribute("transform"),
                    this._savedTransformAttr = null),
                    delete this._isAnimatedProperty[b]
                }
            };
            for (var k in i)
                e.prototype[k] = function(a, b) {
                    return function() {
                        var c = this._surrogateStyle[a].apply(this._surrogateStyle, arguments);
                        return b && (this._isAnimatedProperty[arguments[0]] || this._style[a].apply(this._style, arguments),
                        this._updateIndices()),
                        c
                    }
                }(k, k in j);
            for (var l in document.documentElement.style)
                l in h || l in i || function(a) {
                    d(e.prototype, a, {
                        get: function() {
                            return this._surrogateStyle[a]
                        },
                        set: function(b) {
                            this._surrogateStyle[a] = b,
                            this._updateIndices(),
                            this._isAnimatedProperty[a] || (this._style[a] = b)
                        }
                    })
                }(l);
            a.apply = function(b, c, d) {
                f(b),
                b.style._set(a.propertyName(c), d)
            }
            ,
            a.clear = function(b, c) {
                b._webAnimationsPatchedStyle && b.style._clear(a.propertyName(c))
            }
        }(b),
        function(a) {
            window.Element.prototype.animate = function(b, c) {
                var d = "";
                return c && c.id && (d = c.id),
                a.timeline._play(a.KeyframeEffect(this, b, c, d))
            }
        }(b),
        function(a, b) {
            function c(a, b, d) {
                if ("number" == typeof a && "number" == typeof b)
                    return a * (1 - d) + b * d;
                if ("boolean" == typeof a && "boolean" == typeof b)
                    return d < .5 ? a : b;
                if (a.length == b.length) {
                    for (var e = [], f = 0; f < a.length; f++)
                        e.push(c(a[f], b[f], d));
                    return e
                }
                throw "Mismatched interpolation arguments " + a + ":" + b
            }
            a.Interpolation = function(a, b, d) {
                return function(e) {
                    return d(c(a, b, e))
                }
            }
        }(b),
        function(a, b) {
            function c(a, b, c) {
                return Math.max(Math.min(a, c), b)
            }
            function d(b, d, e) {
                var f = a.dot(b, d);
                f = c(f, -1, 1);
                var g = [];
                if (1 === f)
                    g = b;
                else
                    for (var h = Math.acos(f), i = 1 * Math.sin(e * h) / Math.sqrt(1 - f * f), j = 0; j < 4; j++)
                        g.push(b[j] * (Math.cos(e * h) - f * i) + d[j] * i);
                return g
            }
            var e = function() {
                function a(a, b) {
                    for (var c = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], d = 0; d < 4; d++)
                        for (var e = 0; e < 4; e++)
                            for (var f = 0; f < 4; f++)
                                c[d][e] += b[d][f] * a[f][e];
                    return c
                }
                function b(a) {
                    return 0 == a[0][2] && 0 == a[0][3] && 0 == a[1][2] && 0 == a[1][3] && 0 == a[2][0] && 0 == a[2][1] && 1 == a[2][2] && 0 == a[2][3] && 0 == a[3][2] && 1 == a[3][3]
                }
                function c(c, d, e, f, g) {
                    for (var h = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]], i = 0; i < 4; i++)
                        h[i][3] = g[i];
                    for (var i = 0; i < 3; i++)
                        for (var j = 0; j < 3; j++)
                            h[3][i] += c[j] * h[j][i];
                    var k = f[0]
                      , l = f[1]
                      , m = f[2]
                      , n = f[3]
                      , o = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];
                    o[0][0] = 1 - 2 * (l * l + m * m),
                    o[0][1] = 2 * (k * l - m * n),
                    o[0][2] = 2 * (k * m + l * n),
                    o[1][0] = 2 * (k * l + m * n),
                    o[1][1] = 1 - 2 * (k * k + m * m),
                    o[1][2] = 2 * (l * m - k * n),
                    o[2][0] = 2 * (k * m - l * n),
                    o[2][1] = 2 * (l * m + k * n),
                    o[2][2] = 1 - 2 * (k * k + l * l),
                    h = a(h, o);
                    var p = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];
                    e[2] && (p[2][1] = e[2],
                    h = a(h, p)),
                    e[1] && (p[2][1] = 0,
                    p[2][0] = e[0],
                    h = a(h, p)),
                    e[0] && (p[2][0] = 0,
                    p[1][0] = e[0],
                    h = a(h, p));
                    for (var i = 0; i < 3; i++)
                        for (var j = 0; j < 3; j++)
                            h[i][j] *= d[i];
                    return b(h) ? [h[0][0], h[0][1], h[1][0], h[1][1], h[3][0], h[3][1]] : h[0].concat(h[1], h[2], h[3])
                }
                return c
            }();
            a.composeMatrix = e,
            a.quat = d
        }(b),
        function(a, b, c) {
            a.sequenceNumber = 0;
            var d = function(a, b, c) {
                this.target = a,
                this.currentTime = b,
                this.timelineTime = c,
                this.type = "finish",
                this.bubbles = !1,
                this.cancelable = !1,
                this.currentTarget = a,
                this.defaultPrevented = !1,
                this.eventPhase = Event.AT_TARGET,
                this.timeStamp = Date.now()
            };
            b.Animation = function(b) {
                this.id = "",
                b && b._id && (this.id = b._id),
                this._sequenceNumber = a.sequenceNumber++,
                this._currentTime = 0,
                this._startTime = null,
                this._paused = !1,
                this._playbackRate = 1,
                this._inTimeline = !0,
                this._finishedFlag = !0,
                this.onfinish = null,
                this._finishHandlers = [],
                this._effect = b,
                this._inEffect = this._effect._update(0),
                this._idle = !0,
                this._currentTimePending = !1
            }
            ,
            b.Animation.prototype = {
                _ensureAlive: function() {
                    this.playbackRate < 0 && 0 === this.currentTime ? this._inEffect = this._effect._update(-1) : this._inEffect = this._effect._update(this.currentTime),
                    this._inTimeline || !this._inEffect && this._finishedFlag || (this._inTimeline = !0,
                    b.timeline._animations.push(this))
                },
                _tickCurrentTime: function(a, b) {
                    a != this._currentTime && (this._currentTime = a,
                    this._isFinished && !b && (this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0),
                    this._ensureAlive())
                },
                get currentTime() {
                    return this._idle || this._currentTimePending ? null : this._currentTime
                },
                set currentTime(a) {
                    a = +a,
                    isNaN(a) || (b.restart(),
                    this._paused || null == this._startTime || (this._startTime = this._timeline.currentTime - a / this._playbackRate),
                    this._currentTimePending = !1,
                    this._currentTime != a && (this._idle && (this._idle = !1,
                    this._paused = !0),
                    this._tickCurrentTime(a, !0),
                    b.applyDirtiedAnimation(this)))
                },
                get startTime() {
                    return this._startTime
                },
                set startTime(a) {
                    a = +a,
                    isNaN(a) || this._paused || this._idle || (this._startTime = a,
                    this._tickCurrentTime((this._timeline.currentTime - this._startTime) * this.playbackRate),
                    b.applyDirtiedAnimation(this))
                },
                get playbackRate() {
                    return this._playbackRate
                },
                set playbackRate(a) {
                    if (a != this._playbackRate) {
                        var c = this.currentTime;
                        this._playbackRate = a,
                        this._startTime = null,
                        "paused" != this.playState && "idle" != this.playState && (this._finishedFlag = !1,
                        this._idle = !1,
                        this._ensureAlive(),
                        b.applyDirtiedAnimation(this)),
                        null != c && (this.currentTime = c)
                    }
                },
                get _isFinished() {
                    return !this._idle && (this._playbackRate > 0 && this._currentTime >= this._totalDuration || this._playbackRate < 0 && this._currentTime <= 0)
                },
                get _totalDuration() {
                    return this._effect._totalDuration
                },
                get playState() {
                    return this._idle ? "idle" : null == this._startTime && !this._paused && 0 != this.playbackRate || this._currentTimePending ? "pending" : this._paused ? "paused" : this._isFinished ? "finished" : "running"
                },
                _rewind: function() {
                    if (this._playbackRate >= 0)
                        this._currentTime = 0;
                    else {
                        if (!(this._totalDuration < 1 / 0))
                            throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
                        this._currentTime = this._totalDuration
                    }
                },
                play: function() {
                    this._paused = !1,
                    (this._isFinished || this._idle) && (this._rewind(),
                    this._startTime = null),
                    this._finishedFlag = !1,
                    this._idle = !1,
                    this._ensureAlive(),
                    b.applyDirtiedAnimation(this)
                },
                pause: function() {
                    this._isFinished || this._paused || this._idle ? this._idle && (this._rewind(),
                    this._idle = !1) : this._currentTimePending = !0,
                    this._startTime = null,
                    this._paused = !0
                },
                finish: function() {
                    this._idle || (this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0,
                    this._startTime = this._totalDuration - this.currentTime,
                    this._currentTimePending = !1,
                    b.applyDirtiedAnimation(this))
                },
                cancel: function() {
                    this._inEffect && (this._inEffect = !1,
                    this._idle = !0,
                    this._paused = !1,
                    this._finishedFlag = !0,
                    this._currentTime = 0,
                    this._startTime = null,
                    this._effect._update(null),
                    b.applyDirtiedAnimation(this))
                },
                reverse: function() {
                    this.playbackRate *= -1,
                    this.play()
                },
                addEventListener: function(a, b) {
                    "function" == typeof b && "finish" == a && this._finishHandlers.push(b)
                },
                removeEventListener: function(a, b) {
                    if ("finish" == a) {
                        var c = this._finishHandlers.indexOf(b);
                        c >= 0 && this._finishHandlers.splice(c, 1)
                    }
                },
                _fireEvents: function(a) {
                    if (this._isFinished) {
                        if (!this._finishedFlag) {
                            var b = new d(this,this._currentTime,a)
                              , c = this._finishHandlers.concat(this.onfinish ? [this.onfinish] : []);
                            setTimeout(function() {
                                c.forEach(function(a) {
                                    a.call(b.target, b)
                                })
                            }, 0),
                            this._finishedFlag = !0
                        }
                    } else
                        this._finishedFlag = !1
                },
                _tick: function(a, b) {
                    this._idle || this._paused || (null == this._startTime ? b && (this.startTime = a - this._currentTime / this.playbackRate) : this._isFinished || this._tickCurrentTime((a - this._startTime) * this.playbackRate)),
                    b && (this._currentTimePending = !1,
                    this._fireEvents(a))
                },
                get _needsTick() {
                    return this.playState in {
                        pending: 1,
                        running: 1
                    } || !this._finishedFlag
                },
                _targetAnimations: function() {
                    var a = this._effect._target;
                    return a._activeAnimations || (a._activeAnimations = []),
                    a._activeAnimations
                },
                _markTarget: function() {
                    var a = this._targetAnimations();
                    -1 === a.indexOf(this) && a.push(this)
                },
                _unmarkTarget: function() {
                    var a = this._targetAnimations()
                      , b = a.indexOf(this);
                    -1 !== b && a.splice(b, 1)
                }
            }
        }(a, b),
        function(a, b, c) {
            function d(a) {
                var b = j;
                j = [],
                a < q.currentTime && (a = q.currentTime),
                q._animations.sort(e),
                q._animations = h(a, !0, q._animations)[0],
                b.forEach(function(b) {
                    b[1](a)
                }),
                g(),
                l = void 0
            }
            function e(a, b) {
                return a._sequenceNumber - b._sequenceNumber
            }
            function f() {
                this._animations = [],
                this.currentTime = window.performance && performance.now ? performance.now() : 0
            }
            function g() {
                o.forEach(function(a) {
                    a()
                }),
                o.length = 0
            }
            function h(a, c, d) {
                p = !0,
                n = !1,
                b.timeline.currentTime = a,
                m = !1;
                var e = []
                  , f = []
                  , g = []
                  , h = [];
                return d.forEach(function(b) {
                    b._tick(a, c),
                    b._inEffect ? (f.push(b._effect),
                    b._markTarget()) : (e.push(b._effect),
                    b._unmarkTarget()),
                    b._needsTick && (m = !0);
                    var d = b._inEffect || b._needsTick;
                    b._inTimeline = d,
                    d ? g.push(b) : h.push(b)
                }),
                o.push.apply(o, e),
                o.push.apply(o, f),
                m && requestAnimationFrame(function() {}),
                p = !1,
                [g, h]
            }
            var i = window.requestAnimationFrame
              , j = []
              , k = 0;
            window.requestAnimationFrame = function(a) {
                var b = k++;
                return 0 == j.length && i(d),
                j.push([b, a]),
                b
            }
            ,
            window.cancelAnimationFrame = function(a) {
                j.forEach(function(b) {
                    b[0] == a && (b[1] = function() {}
                    )
                })
            }
            ,
            f.prototype = {
                _play: function(c) {
                    c._timing = a.normalizeTimingInput(c.timing);
                    var d = new b.Animation(c);
                    return d._idle = !1,
                    d._timeline = this,
                    this._animations.push(d),
                    b.restart(),
                    b.applyDirtiedAnimation(d),
                    d
                }
            };
            var l = void 0
              , m = !1
              , n = !1;
            b.restart = function() {
                return m || (m = !0,
                requestAnimationFrame(function() {}),
                n = !0),
                n
            }
            ,
            b.applyDirtiedAnimation = function(a) {
                if (!p) {
                    a._markTarget();
                    var c = a._targetAnimations();
                    c.sort(e),
                    h(b.timeline.currentTime, !1, c.slice())[1].forEach(function(a) {
                        var b = q._animations.indexOf(a);
                        -1 !== b && q._animations.splice(b, 1)
                    }),
                    g()
                }
            }
            ;
            var o = []
              , p = !1
              , q = new f;
            b.timeline = q
        }(a, b),
        function(a, b) {
            function c(a, b) {
                for (var c = 0, d = 0; d < a.length; d++)
                    c += a[d] * b[d];
                return c
            }
            function d(a, b) {
                return [a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3], a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3], a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3], a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3], a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7], a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7], a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7], a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7], a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11], a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11], a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11], a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11], a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15], a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15], a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15], a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15]]
            }
            function e(a) {
                var b = a.rad || 0;
                return ((a.deg || 0) / 360 + (a.grad || 0) / 400 + (a.turn || 0)) * (2 * Math.PI) + b
            }
            function f(a) {
                switch (a.t) {
                case "rotatex":
                    var b = e(a.d[0]);
                    return [1, 0, 0, 0, 0, Math.cos(b), Math.sin(b), 0, 0, -Math.sin(b), Math.cos(b), 0, 0, 0, 0, 1];
                case "rotatey":
                    var b = e(a.d[0]);
                    return [Math.cos(b), 0, -Math.sin(b), 0, 0, 1, 0, 0, Math.sin(b), 0, Math.cos(b), 0, 0, 0, 0, 1];
                case "rotate":
                case "rotatez":
                    var b = e(a.d[0]);
                    return [Math.cos(b), Math.sin(b), 0, 0, -Math.sin(b), Math.cos(b), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "rotate3d":
                    var c = a.d[0]
                      , d = a.d[1]
                      , f = a.d[2]
                      , b = e(a.d[3])
                      , g = c * c + d * d + f * f;
                    if (0 === g)
                        c = 1,
                        d = 0,
                        f = 0;
                    else if (1 !== g) {
                        var h = Math.sqrt(g);
                        c /= h,
                        d /= h,
                        f /= h
                    }
                    var i = Math.sin(b / 2)
                      , j = i * Math.cos(b / 2)
                      , k = i * i;
                    return [1 - 2 * (d * d + f * f) * k, 2 * (c * d * k + f * j), 2 * (c * f * k - d * j), 0, 2 * (c * d * k - f * j), 1 - 2 * (c * c + f * f) * k, 2 * (d * f * k + c * j), 0, 2 * (c * f * k + d * j), 2 * (d * f * k - c * j), 1 - 2 * (c * c + d * d) * k, 0, 0, 0, 0, 1];
                case "scale":
                    return [a.d[0], 0, 0, 0, 0, a.d[1], 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "scalex":
                    return [a.d[0], 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "scaley":
                    return [1, 0, 0, 0, 0, a.d[0], 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "scalez":
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, a.d[0], 0, 0, 0, 0, 1];
                case "scale3d":
                    return [a.d[0], 0, 0, 0, 0, a.d[1], 0, 0, 0, 0, a.d[2], 0, 0, 0, 0, 1];
                case "skew":
                    var l = e(a.d[0])
                      , m = e(a.d[1]);
                    return [1, Math.tan(m), 0, 0, Math.tan(l), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "skewx":
                    var b = e(a.d[0]);
                    return [1, 0, 0, 0, Math.tan(b), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "skewy":
                    var b = e(a.d[0]);
                    return [1, Math.tan(b), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
                case "translate":
                    var c = a.d[0].px || 0
                      , d = a.d[1].px || 0;
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, c, d, 0, 1];
                case "translatex":
                    var c = a.d[0].px || 0;
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, c, 0, 0, 1];
                case "translatey":
                    var d = a.d[0].px || 0;
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, d, 0, 1];
                case "translatez":
                    var f = a.d[0].px || 0;
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, f, 1];
                case "translate3d":
                    var c = a.d[0].px || 0
                      , d = a.d[1].px || 0
                      , f = a.d[2].px || 0;
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, c, d, f, 1];
                case "perspective":
                    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, a.d[0].px ? -1 / a.d[0].px : 0, 0, 0, 0, 1];
                case "matrix":
                    return [a.d[0], a.d[1], 0, 0, a.d[2], a.d[3], 0, 0, 0, 0, 1, 0, a.d[4], a.d[5], 0, 1];
                case "matrix3d":
                    return a.d
                }
            }
            function g(a) {
                return 0 === a.length ? [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1] : a.map(f).reduce(d)
            }
            function h(a) {
                return [i(g(a))]
            }
            var i = function() {
                function a(a) {
                    return a[0][0] * a[1][1] * a[2][2] + a[1][0] * a[2][1] * a[0][2] + a[2][0] * a[0][1] * a[1][2] - a[0][2] * a[1][1] * a[2][0] - a[1][2] * a[2][1] * a[0][0] - a[2][2] * a[0][1] * a[1][0]
                }
                function b(b) {
                    for (var c = 1 / a(b), d = b[0][0], e = b[0][1], f = b[0][2], g = b[1][0], h = b[1][1], i = b[1][2], j = b[2][0], k = b[2][1], l = b[2][2], m = [[(h * l - i * k) * c, (f * k - e * l) * c, (e * i - f * h) * c, 0], [(i * j - g * l) * c, (d * l - f * j) * c, (f * g - d * i) * c, 0], [(g * k - h * j) * c, (j * e - d * k) * c, (d * h - e * g) * c, 0]], n = [], o = 0; o < 3; o++) {
                        for (var p = 0, q = 0; q < 3; q++)
                            p += b[3][q] * m[q][o];
                        n.push(p)
                    }
                    return n.push(1),
                    m.push(n),
                    m
                }
                function d(a) {
                    return [[a[0][0], a[1][0], a[2][0], a[3][0]], [a[0][1], a[1][1], a[2][1], a[3][1]], [a[0][2], a[1][2], a[2][2], a[3][2]], [a[0][3], a[1][3], a[2][3], a[3][3]]]
                }
                function e(a, b) {
                    for (var c = [], d = 0; d < 4; d++) {
                        for (var e = 0, f = 0; f < 4; f++)
                            e += a[f] * b[f][d];
                        c.push(e)
                    }
                    return c
                }
                function f(a) {
                    var b = g(a);
                    return [a[0] / b, a[1] / b, a[2] / b]
                }
                function g(a) {
                    return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2])
                }
                function h(a, b, c, d) {
                    return [c * a[0] + d * b[0], c * a[1] + d * b[1], c * a[2] + d * b[2]]
                }
                function i(a, b) {
                    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]
                }
                function j(j) {
                    var k = [j.slice(0, 4), j.slice(4, 8), j.slice(8, 12), j.slice(12, 16)];
                    if (1 !== k[3][3])
                        return null;
                    for (var l = [], m = 0; m < 4; m++)
                        l.push(k[m].slice());
                    for (var m = 0; m < 3; m++)
                        l[m][3] = 0;
                    if (0 === a(l))
                        return null;
                    var n, o = [];
                    k[0][3] || k[1][3] || k[2][3] ? (o.push(k[0][3]),
                    o.push(k[1][3]),
                    o.push(k[2][3]),
                    o.push(k[3][3]),
                    n = e(o, d(b(l)))) : n = [0, 0, 0, 1];
                    var p = k[3].slice(0, 3)
                      , q = [];
                    q.push(k[0].slice(0, 3));
                    var r = [];
                    r.push(g(q[0])),
                    q[0] = f(q[0]);
                    var s = [];
                    q.push(k[1].slice(0, 3)),
                    s.push(c(q[0], q[1])),
                    q[1] = h(q[1], q[0], 1, -s[0]),
                    r.push(g(q[1])),
                    q[1] = f(q[1]),
                    s[0] /= r[1],
                    q.push(k[2].slice(0, 3)),
                    s.push(c(q[0], q[2])),
                    q[2] = h(q[2], q[0], 1, -s[1]),
                    s.push(c(q[1], q[2])),
                    q[2] = h(q[2], q[1], 1, -s[2]),
                    r.push(g(q[2])),
                    q[2] = f(q[2]),
                    s[1] /= r[2],
                    s[2] /= r[2];
                    var t = i(q[1], q[2]);
                    if (c(q[0], t) < 0)
                        for (var m = 0; m < 3; m++)
                            r[m] *= -1,
                            q[m][0] *= -1,
                            q[m][1] *= -1,
                            q[m][2] *= -1;
                    var u, v, w = q[0][0] + q[1][1] + q[2][2] + 1;
                    return w > 1e-4 ? (u = .5 / Math.sqrt(w),
                    v = [(q[2][1] - q[1][2]) * u, (q[0][2] - q[2][0]) * u, (q[1][0] - q[0][1]) * u, .25 / u]) : q[0][0] > q[1][1] && q[0][0] > q[2][2] ? (u = 2 * Math.sqrt(1 + q[0][0] - q[1][1] - q[2][2]),
                    v = [.25 * u, (q[0][1] + q[1][0]) / u, (q[0][2] + q[2][0]) / u, (q[2][1] - q[1][2]) / u]) : q[1][1] > q[2][2] ? (u = 2 * Math.sqrt(1 + q[1][1] - q[0][0] - q[2][2]),
                    v = [(q[0][1] + q[1][0]) / u, .25 * u, (q[1][2] + q[2][1]) / u, (q[0][2] - q[2][0]) / u]) : (u = 2 * Math.sqrt(1 + q[2][2] - q[0][0] - q[1][1]),
                    v = [(q[0][2] + q[2][0]) / u, (q[1][2] + q[2][1]) / u, .25 * u, (q[1][0] - q[0][1]) / u]),
                    [p, r, s, v, n]
                }
                return j
            }();
            a.dot = c,
            a.makeMatrixDecomposition = h,
            a.transformListToMatrix = g
        }(b),
        function(a) {
            function b(a, b) {
                var c = a.exec(b);
                if (c)
                    return c = a.ignoreCase ? c[0].toLowerCase() : c[0],
                    [c, b.substr(c.length)]
            }
            function c(a, b) {
                b = b.replace(/^\s*/, "");
                var c = a(b);
                if (c)
                    return [c[0], c[1].replace(/^\s*/, "")]
            }
            function d(a, d, e) {
                a = c.bind(null, a);
                for (var f = []; ; ) {
                    var g = a(e);
                    if (!g)
                        return [f, e];
                    if (f.push(g[0]),
                    e = g[1],
                    !(g = b(d, e)) || "" == g[1])
                        return [f, e];
                    e = g[1]
                }
            }
            function e(a, b) {
                for (var c = 0, d = 0; d < b.length && (!/\s|,/.test(b[d]) || 0 != c); d++)
                    if ("(" == b[d])
                        c++;
                    else if (")" == b[d] && (c--,
                    0 == c && d++,
                    c <= 0))
                        break;
                var e = a(b.substr(0, d));
                return void 0 == e ? void 0 : [e, b.substr(d)]
            }
            function f(a, b) {
                for (var c = a, d = b; c && d; )
                    c > d ? c %= d : d %= c;
                return c = a * b / (c + d)
            }
            function g(a) {
                return function(b) {
                    var c = a(b);
                    return c && (c[0] = void 0),
                    c
                }
            }
            function h(a, b) {
                return function(c) {
                    return a(c) || [b, c]
                }
            }
            function i(b, c) {
                for (var d = [], e = 0; e < b.length; e++) {
                    var f = a.consumeTrimmed(b[e], c);
                    if (!f || "" == f[0])
                        return;
                    void 0 !== f[0] && d.push(f[0]),
                    c = f[1]
                }
                if ("" == c)
                    return d
            }
            function j(a, b, c, d, e) {
                for (var g = [], h = [], i = [], j = f(d.length, e.length), k = 0; k < j; k++) {
                    var l = b(d[k % d.length], e[k % e.length]);
                    if (!l)
                        return;
                    g.push(l[0]),
                    h.push(l[1]),
                    i.push(l[2])
                }
                return [g, h, function(b) {
                    var d = b.map(function(a, b) {
                        return i[b](a)
                    }).join(c);
                    return a ? a(d) : d
                }
                ]
            }
            function k(a, b, c) {
                for (var d = [], e = [], f = [], g = 0, h = 0; h < c.length; h++)
                    if ("function" == typeof c[h]) {
                        var i = c[h](a[g], b[g++]);
                        d.push(i[0]),
                        e.push(i[1]),
                        f.push(i[2])
                    } else
                        !function(a) {
                            d.push(!1),
                            e.push(!1),
                            f.push(function() {
                                return c[a]
                            })
                        }(h);
                return [d, e, function(a) {
                    for (var b = "", c = 0; c < a.length; c++)
                        b += f[c](a[c]);
                    return b
                }
                ]
            }
            a.consumeToken = b,
            a.consumeTrimmed = c,
            a.consumeRepeated = d,
            a.consumeParenthesised = e,
            a.ignore = g,
            a.optional = h,
            a.consumeList = i,
            a.mergeNestedRepeated = j.bind(null, null),
            a.mergeWrappedNestedRepeated = j,
            a.mergeList = k
        }(b),
        function(a) {
            function b(b) {
                function c(b) {
                    var c = a.consumeToken(/^inset/i, b);
                    return c ? (d.inset = !0,
                    c) : (c = a.consumeLengthOrPercent(b)) ? (d.lengths.push(c[0]),
                    c) : (c = a.consumeColor(b),
                    c ? (d.color = c[0],
                    c) : void 0)
                }
                var d = {
                    inset: !1,
                    lengths: [],
                    color: null
                }
                  , e = a.consumeRepeated(c, /^/, b);
                if (e && e[0].length)
                    return [d, e[1]]
            }
            function c(c) {
                var d = a.consumeRepeated(b, /^,/, c);
                if (d && "" == d[1])
                    return d[0]
            }
            function d(b, c) {
                for (; b.lengths.length < Math.max(b.lengths.length, c.lengths.length); )
                    b.lengths.push({
                        px: 0
                    });
                for (; c.lengths.length < Math.max(b.lengths.length, c.lengths.length); )
                    c.lengths.push({
                        px: 0
                    });
                if (b.inset == c.inset && !!b.color == !!c.color) {
                    for (var d, e = [], f = [[], 0], g = [[], 0], h = 0; h < b.lengths.length; h++) {
                        var i = a.mergeDimensions(b.lengths[h], c.lengths[h], 2 == h);
                        f[0].push(i[0]),
                        g[0].push(i[1]),
                        e.push(i[2])
                    }
                    if (b.color && c.color) {
                        var j = a.mergeColors(b.color, c.color);
                        f[1] = j[0],
                        g[1] = j[1],
                        d = j[2]
                    }
                    return [f, g, function(a) {
                        for (var c = b.inset ? "inset " : " ", f = 0; f < e.length; f++)
                            c += e[f](a[0][f]) + " ";
                        return d && (c += d(a[1])),
                        c
                    }
                    ]
                }
            }
            function e(b, c, d, e) {
                function f(a) {
                    return {
                        inset: a,
                        color: [0, 0, 0, 0],
                        lengths: [{
                            px: 0
                        }, {
                            px: 0
                        }, {
                            px: 0
                        }, {
                            px: 0
                        }]
                    }
                }
                for (var g = [], h = [], i = 0; i < d.length || i < e.length; i++) {
                    var j = d[i] || f(e[i].inset)
                      , k = e[i] || f(d[i].inset);
                    g.push(j),
                    h.push(k)
                }
                return a.mergeNestedRepeated(b, c, g, h)
            }
            var f = e.bind(null, d, ", ");
            a.addPropertiesHandler(c, f, ["box-shadow", "text-shadow"])
        }(b),
        function(a, b) {
            function c(a) {
                return a.toFixed(3).replace(/0+$/, "").replace(/\.$/, "")
            }
            function d(a, b, c) {
                return Math.min(b, Math.max(a, c))
            }
            function e(a) {
                if (/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a))
                    return Number(a)
            }
            function f(a, b) {
                return [a, b, c]
            }
            function g(a, b) {
                if (0 != a)
                    return i(0, 1 / 0)(a, b)
            }
            function h(a, b) {
                return [a, b, function(a) {
                    return Math.round(d(1, 1 / 0, a))
                }
                ]
            }
            function i(a, b) {
                return function(e, f) {
                    return [e, f, function(e) {
                        return c(d(a, b, e))
                    }
                    ]
                }
            }
            function j(a) {
                var b = a.trim().split(/\s*[\s,]\s*/);
                if (0 !== b.length) {
                    for (var c = [], d = 0; d < b.length; d++) {
                        var f = e(b[d]);
                        if (void 0 === f)
                            return;
                        c.push(f)
                    }
                    return c
                }
            }
            function k(a, b) {
                if (a.length == b.length)
                    return [a, b, function(a) {
                        return a.map(c).join(" ")
                    }
                    ]
            }
            function l(a, b) {
                return [a, b, Math.round]
            }
            a.clamp = d,
            a.addPropertiesHandler(j, k, ["stroke-dasharray"]),
            a.addPropertiesHandler(e, i(0, 1 / 0), ["border-image-width", "line-height"]),
            a.addPropertiesHandler(e, i(0, 1), ["opacity", "shape-image-threshold"]),
            a.addPropertiesHandler(e, g, ["flex-grow", "flex-shrink"]),
            a.addPropertiesHandler(e, h, ["orphans", "widows"]),
            a.addPropertiesHandler(e, l, ["z-index"]),
            a.parseNumber = e,
            a.parseNumberList = j,
            a.mergeNumbers = f,
            a.numberToString = c
        }(b),
        function(a, b) {
            function c(a, b) {
                if ("visible" == a || "visible" == b)
                    return [0, 1, function(c) {
                        return c <= 0 ? a : c >= 1 ? b : "visible"
                    }
                    ]
            }
            a.addPropertiesHandler(String, c, ["visibility"])
        }(b),
        function(a, b) {
            function c(a) {
                a = a.trim(),
                f.fillStyle = "#000",
                f.fillStyle = a;
                var b = f.fillStyle;
                if (f.fillStyle = "#fff",
                f.fillStyle = a,
                b == f.fillStyle) {
                    f.fillRect(0, 0, 1, 1);
                    var c = f.getImageData(0, 0, 1, 1).data;
                    f.clearRect(0, 0, 1, 1);
                    var d = c[3] / 255;
                    return [c[0] * d, c[1] * d, c[2] * d, d]
                }
            }
            function d(b, c) {
                return [b, c, function(b) {
                    function c(a) {
                        return Math.max(0, Math.min(255, a))
                    }
                    if (b[3])
                        for (var d = 0; d < 3; d++)
                            b[d] = Math.round(c(b[d] / b[3]));
                    return b[3] = a.numberToString(a.clamp(0, 1, b[3])),
                    "rgba(" + b.join(",") + ")"
                }
                ]
            }
            var e = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
            e.width = e.height = 1;
            var f = e.getContext("2d");
            a.addPropertiesHandler(c, d, ["background-color", "border-bottom-color", "border-left-color", "border-right-color", "border-top-color", "color", "fill", "flood-color", "lighting-color", "outline-color", "stop-color", "stroke", "text-decoration-color"]),
            a.consumeColor = a.consumeParenthesised.bind(null, c),
            a.mergeColors = d
        }(b),
        function(a, b) {
            function c(a) {
                function b() {
                    var b = h.exec(a);
                    g = b ? b[0] : void 0
                }
                function c() {
                    var a = Number(g);
                    return b(),
                    a
                }
                function d() {
                    if ("(" !== g)
                        return c();
                    b();
                    var a = f();
                    return ")" !== g ? NaN : (b(),
                    a)
                }
                function e() {
                    for (var a = d(); "*" === g || "/" === g; ) {
                        var c = g;
                        b();
                        var e = d();
                        "*" === c ? a *= e : a /= e
                    }
                    return a
                }
                function f() {
                    for (var a = e(); "+" === g || "-" === g; ) {
                        var c = g;
                        b();
                        var d = e();
                        "+" === c ? a += d : a -= d
                    }
                    return a
                }
                var g, h = /([\+\-\w\.]+|[\(\)\*\/])/g;
                return b(),
                f()
            }
            function d(a, b) {
                if ("0" == (b = b.trim().toLowerCase()) && "px".search(a) >= 0)
                    return {
                        px: 0
                    };
                if (/^[^(]*$|^calc/.test(b)) {
                    b = b.replace(/calc\(/g, "(");
                    var d = {};
                    b = b.replace(a, function(a) {
                        return d[a] = null,
                        "U" + a
                    });
                    for (var e = "U(" + a.source + ")", f = b.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g, "N").replace(new RegExp("N" + e,"g"), "D").replace(/\s[+-]\s/g, "O").replace(/\s/g, ""), g = [/N\*(D)/g, /(N|D)[*\/]N/g, /(N|D)O\1/g, /\((N|D)\)/g], h = 0; h < g.length; )
                        g[h].test(f) ? (f = f.replace(g[h], "$1"),
                        h = 0) : h++;
                    if ("D" == f) {
                        for (var i in d) {
                            var j = c(b.replace(new RegExp("U" + i,"g"), "").replace(new RegExp(e,"g"), "*0"));
                            if (!isFinite(j))
                                return;
                            d[i] = j
                        }
                        return d
                    }
                }
            }
            function e(a, b) {
                return f(a, b, !0)
            }
            function f(b, c, d) {
                var e, f = [];
                for (e in b)
                    f.push(e);
                for (e in c)
                    f.indexOf(e) < 0 && f.push(e);
                return b = f.map(function(a) {
                    return b[a] || 0
                }),
                c = f.map(function(a) {
                    return c[a] || 0
                }),
                [b, c, function(b) {
                    var c = b.map(function(c, e) {
                        return 1 == b.length && d && (c = Math.max(c, 0)),
                        a.numberToString(c) + f[e]
                    }).join(" + ");
                    return b.length > 1 ? "calc(" + c + ")" : c
                }
                ]
            }
            var g = "px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc"
              , h = d.bind(null, new RegExp(g,"g"))
              , i = d.bind(null, new RegExp(g + "|%","g"))
              , j = d.bind(null, /deg|rad|grad|turn/g);
            a.parseLength = h,
            a.parseLengthOrPercent = i,
            a.consumeLengthOrPercent = a.consumeParenthesised.bind(null, i),
            a.parseAngle = j,
            a.mergeDimensions = f;
            var k = a.consumeParenthesised.bind(null, h)
              , l = a.consumeRepeated.bind(void 0, k, /^/)
              , m = a.consumeRepeated.bind(void 0, l, /^,/);
            a.consumeSizePairList = m;
            var n = function(a) {
                var b = m(a);
                if (b && "" == b[1])
                    return b[0]
            }
              , o = a.mergeNestedRepeated.bind(void 0, e, " ")
              , p = a.mergeNestedRepeated.bind(void 0, o, ",");
            a.mergeNonNegativeSizePair = o,
            a.addPropertiesHandler(n, p, ["background-size"]),
            a.addPropertiesHandler(i, e, ["border-bottom-width", "border-image-width", "border-left-width", "border-right-width", "border-top-width", "flex-basis", "font-size", "height", "line-height", "max-height", "max-width", "outline-width", "width"]),
            a.addPropertiesHandler(i, f, ["border-bottom-left-radius", "border-bottom-right-radius", "border-top-left-radius", "border-top-right-radius", "bottom", "left", "letter-spacing", "margin-bottom", "margin-left", "margin-right", "margin-top", "min-height", "min-width", "outline-offset", "padding-bottom", "padding-left", "padding-right", "padding-top", "perspective", "right", "shape-margin", "stroke-dashoffset", "text-indent", "top", "vertical-align", "word-spacing"])
        }(b),
        function(a, b) {
            function c(b) {
                return a.consumeLengthOrPercent(b) || a.consumeToken(/^auto/, b)
            }
            function d(b) {
                var d = a.consumeList([a.ignore(a.consumeToken.bind(null, /^rect/)), a.ignore(a.consumeToken.bind(null, /^\(/)), a.consumeRepeated.bind(null, c, /^,/), a.ignore(a.consumeToken.bind(null, /^\)/))], b);
                if (d && 4 == d[0].length)
                    return d[0]
            }
            function e(b, c) {
                return "auto" == b || "auto" == c ? [!0, !1, function(d) {
                    var e = d ? b : c;
                    if ("auto" == e)
                        return "auto";
                    var f = a.mergeDimensions(e, e);
                    return f[2](f[0])
                }
                ] : a.mergeDimensions(b, c)
            }
            function f(a) {
                return "rect(" + a + ")"
            }
            var g = a.mergeWrappedNestedRepeated.bind(null, f, e, ", ");
            a.parseBox = d,
            a.mergeBoxes = g,
            a.addPropertiesHandler(d, g, ["clip"])
        }(b),
        function(a, b) {
            function c(a) {
                return function(b) {
                    var c = 0;
                    return a.map(function(a) {
                        return a === k ? b[c++] : a
                    })
                }
            }
            function d(a) {
                return a
            }
            function e(b) {
                if ("none" == (b = b.toLowerCase().trim()))
                    return [];
                for (var c, d = /\s*(\w+)\(([^)]*)\)/g, e = [], f = 0; c = d.exec(b); ) {
                    if (c.index != f)
                        return;
                    f = c.index + c[0].length;
                    var g = c[1]
                      , h = n[g];
                    if (!h)
                        return;
                    var i = c[2].split(",")
                      , j = h[0];
                    if (j.length < i.length)
                        return;
                    for (var k = [], o = 0; o < j.length; o++) {
                        var p, q = i[o], r = j[o];
                        if (void 0 === (p = q ? {
                            A: function(b) {
                                return "0" == b.trim() ? m : a.parseAngle(b)
                            },
                            N: a.parseNumber,
                            T: a.parseLengthOrPercent,
                            L: a.parseLength
                        }[r.toUpperCase()](q) : {
                            a: m,
                            n: k[0],
                            t: l
                        }[r]))
                            return;
                        k.push(p)
                    }
                    if (e.push({
                        t: g,
                        d: k
                    }),
                    d.lastIndex == b.length)
                        return e
                }
            }
            function f(a) {
                return a.toFixed(6).replace(".000000", "")
            }
            function g(b, c) {
                if (b.decompositionPair !== c) {
                    b.decompositionPair = c;
                    var d = a.makeMatrixDecomposition(b)
                }
                if (c.decompositionPair !== b) {
                    c.decompositionPair = b;
                    var e = a.makeMatrixDecomposition(c)
                }
                return null == d[0] || null == e[0] ? [[!1], [!0], function(a) {
                    return a ? c[0].d : b[0].d
                }
                ] : (d[0].push(0),
                e[0].push(1),
                [d, e, function(b) {
                    var c = a.quat(d[0][3], e[0][3], b[5]);
                    return a.composeMatrix(b[0], b[1], b[2], c, b[4]).map(f).join(",")
                }
                ])
            }
            function h(a) {
                return a.replace(/[xy]/, "")
            }
            function i(a) {
                return a.replace(/(x|y|z|3d)?$/, "3d")
            }
            function j(b, c) {
                var d = a.makeMatrixDecomposition && !0
                  , e = !1;
                if (!b.length || !c.length) {
                    b.length || (e = !0,
                    b = c,
                    c = []);
                    for (var f = 0; f < b.length; f++) {
                        var j = b[f].t
                          , k = b[f].d
                          , l = "scale" == j.substr(0, 5) ? 1 : 0;
                        c.push({
                            t: j,
                            d: k.map(function(a) {
                                if ("number" == typeof a)
                                    return l;
                                var b = {};
                                for (var c in a)
                                    b[c] = l;
                                return b
                            })
                        })
                    }
                }
                var m = function(a, b) {
                    return "perspective" == a && "perspective" == b || ("matrix" == a || "matrix3d" == a) && ("matrix" == b || "matrix3d" == b)
                }
                  , o = []
                  , p = []
                  , q = [];
                if (b.length != c.length) {
                    if (!d)
                        return;
                    var r = g(b, c);
                    o = [r[0]],
                    p = [r[1]],
                    q = [["matrix", [r[2]]]]
                } else
                    for (var f = 0; f < b.length; f++) {
                        var j, s = b[f].t, t = c[f].t, u = b[f].d, v = c[f].d, w = n[s], x = n[t];
                        if (m(s, t)) {
                            if (!d)
                                return;
                            var r = g([b[f]], [c[f]]);
                            o.push(r[0]),
                            p.push(r[1]),
                            q.push(["matrix", [r[2]]])
                        } else {
                            if (s == t)
                                j = s;
                            else if (w[2] && x[2] && h(s) == h(t))
                                j = h(s),
                                u = w[2](u),
                                v = x[2](v);
                            else {
                                if (!w[1] || !x[1] || i(s) != i(t)) {
                                    if (!d)
                                        return;
                                    var r = g(b, c);
                                    o = [r[0]],
                                    p = [r[1]],
                                    q = [["matrix", [r[2]]]];
                                    break
                                }
                                j = i(s),
                                u = w[1](u),
                                v = x[1](v)
                            }
                            for (var y = [], z = [], A = [], B = 0; B < u.length; B++) {
                                var C = "number" == typeof u[B] ? a.mergeNumbers : a.mergeDimensions
                                  , r = C(u[B], v[B]);
                                y[B] = r[0],
                                z[B] = r[1],
                                A.push(r[2])
                            }
                            o.push(y),
                            p.push(z),
                            q.push([j, A])
                        }
                    }
                if (e) {
                    var D = o;
                    o = p,
                    p = D
                }
                return [o, p, function(a) {
                    return a.map(function(a, b) {
                        var c = a.map(function(a, c) {
                            return q[b][1][c](a)
                        }).join(",");
                        return "matrix" == q[b][0] && 16 == c.split(",").length && (q[b][0] = "matrix3d"),
                        q[b][0] + "(" + c + ")"
                    }).join(" ")
                }
                ]
            }
            var k = null
              , l = {
                px: 0
            }
              , m = {
                deg: 0
            }
              , n = {
                matrix: ["NNNNNN", [k, k, 0, 0, k, k, 0, 0, 0, 0, 1, 0, k, k, 0, 1], d],
                matrix3d: ["NNNNNNNNNNNNNNNN", d],
                rotate: ["A"],
                rotatex: ["A"],
                rotatey: ["A"],
                rotatez: ["A"],
                rotate3d: ["NNNA"],
                perspective: ["L"],
                scale: ["Nn", c([k, k, 1]), d],
                scalex: ["N", c([k, 1, 1]), c([k, 1])],
                scaley: ["N", c([1, k, 1]), c([1, k])],
                scalez: ["N", c([1, 1, k])],
                scale3d: ["NNN", d],
                skew: ["Aa", null, d],
                skewx: ["A", null, c([k, m])],
                skewy: ["A", null, c([m, k])],
                translate: ["Tt", c([k, k, l]), d],
                translatex: ["T", c([k, l, l]), c([k, l])],
                translatey: ["T", c([l, k, l]), c([l, k])],
                translatez: ["L", c([l, l, k])],
                translate3d: ["TTL", d]
            };
            a.addPropertiesHandler(e, j, ["transform"]),
            a.transformToSvgMatrix = function(b) {
                var c = a.transformListToMatrix(e(b));
                return "matrix(" + f(c[0]) + " " + f(c[1]) + " " + f(c[4]) + " " + f(c[5]) + " " + f(c[12]) + " " + f(c[13]) + ")"
            }
        }(b),
        function(a) {
            function b(a) {
                var b = Number(a);
                if (!(isNaN(b) || b < 100 || b > 900 || b % 100 != 0))
                    return b
            }
            function c(b) {
                return b = 100 * Math.round(b / 100),
                b = a.clamp(100, 900, b),
                400 === b ? "normal" : 700 === b ? "bold" : String(b)
            }
            function d(a, b) {
                return [a, b, c]
            }
            a.addPropertiesHandler(b, d, ["font-weight"])
        }(b),
        function(a) {
            function b(a) {
                var b = {};
                for (var c in a)
                    b[c] = -a[c];
                return b
            }
            function c(b) {
                return a.consumeToken(/^(left|center|right|top|bottom)\b/i, b) || a.consumeLengthOrPercent(b)
            }
            function d(b, d) {
                var e = a.consumeRepeated(c, /^/, d);
                if (e && "" == e[1]) {
                    var f = e[0];
                    if (f[0] = f[0] || "center",
                    f[1] = f[1] || "center",
                    3 == b && (f[2] = f[2] || {
                        px: 0
                    }),
                    f.length == b) {
                        if (/top|bottom/.test(f[0]) || /left|right/.test(f[1])) {
                            var h = f[0];
                            f[0] = f[1],
                            f[1] = h
                        }
                        if (/left|right|center|Object/.test(f[0]) && /top|bottom|center|Object/.test(f[1]))
                            return f.map(function(a) {
                                return "object" == typeof a ? a : g[a]
                            })
                    }
                }
            }
            function e(d) {
                var e = a.consumeRepeated(c, /^/, d);
                if (e) {
                    for (var f = e[0], h = [{
                        "%": 50
                    }, {
                        "%": 50
                    }], i = 0, j = !1, k = 0; k < f.length; k++) {
                        var l = f[k];
                        "string" == typeof l ? (j = /bottom|right/.test(l),
                        i = {
                            left: 0,
                            right: 0,
                            center: i,
                            top: 1,
                            bottom: 1
                        }[l],
                        h[i] = g[l],
                        "center" == l && i++) : (j && (l = b(l),
                        l["%"] = (l["%"] || 0) + 100),
                        h[i] = l,
                        i++,
                        j = !1)
                    }
                    return [h, e[1]]
                }
            }
            function f(b) {
                var c = a.consumeRepeated(e, /^,/, b);
                if (c && "" == c[1])
                    return c[0]
            }
            var g = {
                left: {
                    "%": 0
                },
                center: {
                    "%": 50
                },
                right: {
                    "%": 100
                },
                top: {
                    "%": 0
                },
                bottom: {
                    "%": 100
                }
            }
              , h = a.mergeNestedRepeated.bind(null, a.mergeDimensions, " ");
            a.addPropertiesHandler(d.bind(null, 3), h, ["transform-origin"]),
            a.addPropertiesHandler(d.bind(null, 2), h, ["perspective-origin"]),
            a.consumePosition = e,
            a.mergeOffsetList = h;
            var i = a.mergeNestedRepeated.bind(null, h, ", ");
            a.addPropertiesHandler(f, i, ["background-position", "object-position"])
        }(b),
        function(a) {
            function b(b) {
                var c = a.consumeToken(/^circle/, b);
                if (c && c[0])
                    return ["circle"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0, /^\(/)), d, a.ignore(a.consumeToken.bind(void 0, /^at/)), a.consumePosition, a.ignore(a.consumeToken.bind(void 0, /^\)/))], c[1]));
                var f = a.consumeToken(/^ellipse/, b);
                if (f && f[0])
                    return ["ellipse"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0, /^\(/)), e, a.ignore(a.consumeToken.bind(void 0, /^at/)), a.consumePosition, a.ignore(a.consumeToken.bind(void 0, /^\)/))], f[1]));
                var g = a.consumeToken(/^polygon/, b);
                return g && g[0] ? ["polygon"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0, /^\(/)), a.optional(a.consumeToken.bind(void 0, /^nonzero\s*,|^evenodd\s*,/), "nonzero,"), a.consumeSizePairList, a.ignore(a.consumeToken.bind(void 0, /^\)/))], g[1])) : void 0
            }
            function c(b, c) {
                if (b[0] === c[0])
                    return "circle" == b[0] ? a.mergeList(b.slice(1), c.slice(1), ["circle(", a.mergeDimensions, " at ", a.mergeOffsetList, ")"]) : "ellipse" == b[0] ? a.mergeList(b.slice(1), c.slice(1), ["ellipse(", a.mergeNonNegativeSizePair, " at ", a.mergeOffsetList, ")"]) : "polygon" == b[0] && b[1] == c[1] ? a.mergeList(b.slice(2), c.slice(2), ["polygon(", b[1], g, ")"]) : void 0
            }
            var d = a.consumeParenthesised.bind(null, a.parseLengthOrPercent)
              , e = a.consumeRepeated.bind(void 0, d, /^/)
              , f = a.mergeNestedRepeated.bind(void 0, a.mergeDimensions, " ")
              , g = a.mergeNestedRepeated.bind(void 0, f, ",");
            a.addPropertiesHandler(b, c, ["shape-outside"])
        }(b),
        function(a, b) {
            function c(a, b) {
                b.concat([a]).forEach(function(b) {
                    b in document.documentElement.style && (d[a] = b),
                    e[b] = a
                })
            }
            var d = {}
              , e = {};
            c("transform", ["webkitTransform", "msTransform"]),
            c("transformOrigin", ["webkitTransformOrigin"]),
            c("perspective", ["webkitPerspective"]),
            c("perspectiveOrigin", ["webkitPerspectiveOrigin"]),
            a.propertyName = function(a) {
                return d[a] || a
            }
            ,
            a.unprefixedPropertyName = function(a) {
                return e[a] || a
            }
        }(b)
    }(),
    function() {
        if (void 0 === document.createElement("div").animate([]).oncancel) {
            var a;
            if (window.performance && performance.now)
                var a = function() {
                    return performance.now()
                };
            else
                var a = function() {
                    return Date.now()
                };
            var b = function(a, b, c) {
                this.target = a,
                this.currentTime = b,
                this.timelineTime = c,
                this.type = "cancel",
                this.bubbles = !1,
                this.cancelable = !1,
                this.currentTarget = a,
                this.defaultPrevented = !1,
                this.eventPhase = Event.AT_TARGET,
                this.timeStamp = Date.now()
            }
              , c = window.Element.prototype.animate;
            window.Element.prototype.animate = function(d, e) {
                var f = c.call(this, d, e);
                f._cancelHandlers = [],
                f.oncancel = null;
                var g = f.cancel;
                f.cancel = function() {
                    g.call(this);
                    var c = new b(this,null,a())
                      , d = this._cancelHandlers.concat(this.oncancel ? [this.oncancel] : []);
                    setTimeout(function() {
                        d.forEach(function(a) {
                            a.call(c.target, c)
                        })
                    }, 0)
                }
                ;
                var h = f.addEventListener;
                f.addEventListener = function(a, b) {
                    "function" == typeof b && "cancel" == a ? this._cancelHandlers.push(b) : h.call(this, a, b)
                }
                ;
                var i = f.removeEventListener;
                return f.removeEventListener = function(a, b) {
                    if ("cancel" == a) {
                        var c = this._cancelHandlers.indexOf(b);
                        c >= 0 && this._cancelHandlers.splice(c, 1)
                    } else
                        i.call(this, a, b)
                }
                ,
                f
            }
        }
    }(),
    function(a) {
        var b = document.documentElement
          , c = null
          , d = !1;
        try {
            var e = getComputedStyle(b).getPropertyValue("opacity")
              , f = "0" == e ? "1" : "0";
            c = b.animate({
                opacity: [f, f]
            }, {
                duration: 1
            }),
            c.currentTime = 0,
            d = getComputedStyle(b).getPropertyValue("opacity") == f
        } catch (a) {} finally {
            c && c.cancel()
        }
        if (!d) {
            var g = window.Element.prototype.animate;
            window.Element.prototype.animate = function(b, c) {
                return window.Symbol && Symbol.iterator && Array.prototype.from && b[Symbol.iterator] && (b = Array.from(b)),
                Array.isArray(b) || null === b || (b = a.convertToArrayForm(b)),
                g.call(this, b, c)
            }
        }
    }(a)
}();

/**
 * Muuri v0.7.1
 * https://github.com/haltu/muuri
 * Copyright (c) 2015-present, Haltu Oy
 * Released under the MIT license
 * https://github.com/haltu/muuri/blob/master/LICENSE.md
 * @license MIT
 *
 * Muuri Packer
 * Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>
 * @license MIT
 *
 * Muuri Ticker / Muuri Emitter / Muuri Queue
 * Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>
 * @license MIT
 */
!function(t, i) {
    if ("object" == typeof exports && "undefined" != typeof module) {
        var e;
        try {
            e = require("hammerjs")
        } catch (t) {}
        module.exports = i(e)
    } else
        t.Muuri = i(t.Hammer)
}(this, function(t) {
    "use strict";
    var i = "Muuri"
      , e = {}
      , s = "layoutEnd";
    function n() {
        this._events = {},
        this._queue = [],
        this._counter = 0,
        this._isDestroyed = !1
    }
    n.prototype.on = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e = this._events[t];
        return e || (e = this._events[t] = []),
        e.push(i),
        this
    }
    ,
    n.prototype.once = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e = function() {
            this.off(t, e),
            i.apply(null, arguments)
        }
        .bind(this);
        return this.on(t, e)
    }
    ,
    n.prototype.off = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e = this._events[t];
        if (!e || !e.length)
            return this;
        if (!i)
            return e.length = 0,
            this;
        for (var s = e.length; s--; )
            i === e[s] && e.splice(s, 1);
        return this
    }
    ,
    n.prototype.emit = function(t, i, e, s) {
        if (this._isDestroyed)
            return this;
        var n = this._events[t];
        if (!n || !n.length)
            return this;
        var r, o = this._queue, h = o.length, a = arguments.length - 1;
        for (r = 0; r < n.length; r++)
            o.push(n[r]);
        for (++this._counter,
        r = h,
        h = o.length; r < h; r++)
            if (0 === a ? o[r]() : 1 === a ? o[r](i) : 2 === a ? o[r](i, e) : o[r](i, e, s),
            this._isDestroyed)
                return this;
        return --this._counter,
        this._counter || (o.length = 0),
        this
    }
    ,
    n.prototype.destroy = function() {
        if (this._isDestroyed)
            return this;
        var t, i = this._events;
        for (t in this._isDestroyed = !0,
        this._queue.length = this._counter = 0,
        i)
            i[t] && (i[t].length = 0,
            i[t] = void 0);
        return this
    }
    ;
    var r = !1
      , o = "transform"
      , h = "transform";
    ["", "Webkit", "Moz", "O", "ms"].forEach(function(t) {
        if (!r) {
            var i = t ? t + "Transform" : "transform";
            void 0 !== document.documentElement.style[i] && (t = t.toLowerCase(),
            o = t ? "-" + t + "-transform" : "transform",
            h = i,
            r = !0)
        }
    });
    var a = "function" == typeof WeakMap ? new WeakMap : null;
    function _(t, i) {
        var e = a && a.get(t);
        return e || (e = window.getComputedStyle(t, null),
        a && a.set(t, e)),
        e.getPropertyValue("transform" === i ? o : i)
    }
    var l = /([A-Z])/g;
    function d(t) {
        return t.replace(l, "-$1").toLowerCase()
    }
    function f(t, i) {
        for (var e in i)
            t.style["transform" === e ? h : e] = i[e]
    }
    function u(t) {
        this._element = t,
        this._animation = null,
        this._callback = null,
        this._props = [],
        this._values = [],
        this._keyframes = [],
        this._options = {},
        this._isDestroyed = !1,
        this._onFinish = this._onFinish.bind(this)
    }
    u.prototype.start = function(t, i, e) {
        if (!this._isDestroyed) {
            var s = this._animation
              , n = this._props
              , r = this._values
              , o = e || 0
              , h = !1;
            if (s) {
                var a, _ = 0;
                for (var l in i)
                    if (++_,
                    -1 === (a = n.indexOf(l)) || i[l] !== r[a]) {
                        h = !0;
                        break
                    }
                h || _ === n.length || (h = !0)
            }
            if (h && s.cancel(),
            this._callback = "function" == typeof o.onFinish ? o.onFinish : null,
            !s || h) {
                for (l in n.length = r.length = 0,
                i)
                    n.push(l),
                    r.push(i[l]);
                var d = this._keyframes;
                d[0] = t,
                d[1] = i;
                var u = this._options;
                u.duration = o.duration || 300,
                u.easing = o.easing || "ease";
                var c = this._element;
                (s = c.animate(d, u)).onfinish = this._onFinish,
                this._animation = s,
                f(c, i)
            }
        }
    }
    ,
    u.prototype.stop = function(t) {
        if (!this._isDestroyed && this._animation) {
            var i, e, s, n = this._element, r = this._props, o = this._values;
            if (t)
                f(n, t);
            else
                for (s = 0; s < r.length; s++)
                    e = _(n, d(i = r[s])),
                    n.style["transform" === i ? h : i] = e;
            this._animation.cancel(),
            this._animation = this._callback = null,
            r.length = o.length = 0
        }
    }
    ,
    u.prototype.isAnimating = function() {
        return !!this._animation
    }
    ,
    u.prototype.destroy = function() {
        this._isDestroyed || (this.stop(),
        this._element = this._options = this._keyframes = null,
        this._isDestroyed = !0)
    }
    ,
    u.prototype._onFinish = function() {
        var t = this._callback;
        this._animation = this._callback = null,
        this._props.length = this._values.length = 0,
        t && t()
    }
    ;
    var c = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
        return window.setTimeout(t, 16)
    }
    ).bind(window);
    function p() {
        this._nextTick = null,
        this._queue = [],
        this._reads = {},
        this._writes = {},
        this._batch = [],
        this._batchReads = {},
        this._batchWrites = {},
        this._flush = this._flush.bind(this)
    }
    p.prototype.add = function(t, i, e, s) {
        var n = this._queue.indexOf(t);
        n > -1 && (this._queue[n] = void 0),
        s ? this._queue.unshift(t) : this._queue.push(t),
        this._reads[t] = i,
        this._writes[t] = e,
        this._nextTick || (this._nextTick = c(this._flush))
    }
    ,
    p.prototype.cancel = function(t) {
        var i = this._queue.indexOf(t);
        i > -1 && (this._queue[i] = void 0,
        this._reads[t] = void 0,
        this._writes[t] = void 0)
    }
    ,
    p.prototype._flush = function() {
        var t, i, e = this._queue, s = this._reads, n = this._writes, r = this._batch, o = this._batchReads, h = this._batchWrites, a = e.length;
        for (this._nextTick = null,
        i = 0; i < a; i++)
            (t = e[i]) && (r.push(t),
            o[t] = s[t],
            s[t] = void 0,
            h[t] = n[t],
            n[t] = void 0);
        for (e.length = 0,
        i = 0; i < a; i++)
            o[t = r[i]] && (o[t](),
            o[t] = void 0);
        for (i = 0; i < a; i++)
            h[t = r[i]] && (h[t](),
            h[t] = void 0);
        r.length = 0,
        !this._nextTick && e.length && (this._nextTick = c(this._flush))
    }
    ;
    var m = new p
      , g = "layout"
      , y = "visibility"
      , v = "move"
      , w = "scroll";
    function D(t) {
        return m.cancel(t + g)
    }
    function b(t) {
        return m.cancel(t + y)
    }
    function S(t) {
        return m.cancel(t + v)
    }
    function A(t) {
        return m.cancel(t + w)
    }
    var x = Element.prototype
      , R = x.matches || x.matchesSelector || x.webkitMatchesSelector || x.mozMatchesSelector || x.msMatchesSelector || x.oMatchesSelector;
    function C(t, i) {
        return R.call(t, i)
    }
    var I = "classList"in Element.prototype ? function(t, i) {
        t.classList.add(i)
    }
    : function(t, i) {
        C(t, "." + i) || (t.className += " " + i)
    }
    ;
    function L(t, i, e) {
        var s = t.length
          , n = Math.max(0, e ? s : s - 1);
        return i > n ? n : i < 0 ? Math.max(n + i + 1, 0) : i
    }
    function E(t, i, e) {
        if (!(t.length < 2)) {
            var s = L(t, i)
              , n = L(t, e);
            s !== n && t.splice(n, 0, t.splice(s, 1)[0])
        }
    }
    function M(t, i, e) {
        if (!(t.length < 2)) {
            var s, n = L(t, i), r = L(t, e);
            n !== r && (s = t[n],
            t[n] = t[r],
            t[r] = s)
        }
    }
    var H = "cancel"
      , G = "finish";
    function P(t, i) {
        var e;
        return i > 0 ? function(s) {
            void 0 !== e && (e = window.clearTimeout(e),
            s === G && t()),
            s !== H && s !== G && (e = window.setTimeout(function() {
                e = void 0,
                t()
            }, i))
        }
        : function(i) {
            i !== H && t()
        }
    }
    function T(t) {
        var i = _(t, "transform");
        if (!i || "none" === i)
            return !1;
        var e = _(t, "display");
        return "inline" !== e && "none" !== e
    }
    function O(t, i) {
        for (var e = (i ? t : t.parentElement) || document; e && e !== document && "static" === _(e, "position") && !T(e); )
            e = e.parentElement || document;
        return e
    }
    function k(t, i) {
        return parseFloat(_(t, i)) || 0
    }
    var X = {}
      , Y = {}
      , q = {};
    function B(t, i) {
        var e, s = i || {};
        return s.left = 0,
        s.top = 0,
        t === document ? s : (s.left = window.pageXOffset || 0,
        s.top = window.pageYOffset || 0,
        t.self === window.self ? s : (e = t.getBoundingClientRect(),
        s.left += e.left,
        s.top += e.top,
        s.left += k(t, "border-left-width"),
        s.top += k(t, "border-top-width"),
        s))
    }
    function N(t, i, e) {
        return q.left = 0,
        q.top = 0,
        t === i ? q : e && (t = O(t, !0)) === (i = O(i, !0)) ? q : (B(t, X),
        B(i, Y),
        q.left = Y.left - X.left,
        q.top = Y.top - X.top,
        q)
    }
    var F = {};
    function z(t) {
        F.x = 0,
        F.y = 0;
        var i = _(t, "transform");
        if (!i)
            return F;
        var e = i.replace("matrix(", "").split(",");
        return F.x = parseFloat(e[4]) || 0,
        F.y = parseFloat(e[5]) || 0,
        F
    }
    function V(t, i) {
        return "translateX(" + t + "px) translateY(" + i + "px)"
    }
    var W = [];
    function j(t, i, e) {
        var s = "number" == typeof e ? e : -1;
        s < 0 && (s = t.length - s + 1),
        t.splice.apply(t, W.concat(s, 0, i)),
        W.length = 0
    }
    var Z = "[object Object]"
      , $ = Object.prototype.toString;
    function J(t) {
        return "object" == typeof t && $.call(t) === Z
    }
    var K = "classList"in Element.prototype ? function(t, i) {
        t.classList.remove(i)
    }
    : function(t, i) {
        C(t, "." + i) && (t.className = (" " + t.className + " ").replace(" " + i + " ", " ").trim())
    }
      , Q = at()
      , U = 0
      , tt = 1
      , it = 2
      , et = 3;
    function st(e) {
        if (!t)
            throw new Error("[" + i + "] required dependency Hammer is not defined.");
        null === Q && (Q = at());
        var s, n, r = this, o = e._element, h = e.getGrid(), a = h._settings, _ = "function" == typeof a.dragStartPredicate ? a.dragStartPredicate : st.defaultStartPredicate, l = U;
        this._item = e,
        this._gridId = h._id,
        this._hammer = s = new t.Manager(o),
        this._isDestroyed = !1,
        this._isMigrating = !1,
        this._reset(),
        this._onScroll = this._onScroll.bind(this),
        this._prepareMove = this._prepareMove.bind(this),
        this._applyMove = this._applyMove.bind(this),
        this._prepareScroll = this._prepareScroll.bind(this),
        this._applyScroll = this._applyScroll.bind(this),
        this._checkOverlap = this._checkOverlap.bind(this),
        this._forceResolveStartPredicate = function(t) {
            this._isDestroyed || l !== tt || (l = it,
            this._onStart(t))
        }
        ,
        this._checkOverlapDebounce = P(this._checkOverlap, a.dragSortInterval),
        s.add(new t.Pan({
            event: "drag",
            pointers: 1,
            threshold: 0,
            direction: t.DIRECTION_ALL
        })),
        s.add(new t.Press({
            event: "draginit",
            pointers: 1,
            threshold: 1e3,
            time: 0
        })),
        J(a.dragHammerSettings) && s.set(a.dragHammerSettings),
        s.on("draginit dragstart dragmove", function(t) {
            l === U && (l = tt),
            l === tt ? !0 === (n = _(r._item, t)) ? (l = it,
            r._onStart(t)) : !1 === n && (l = et) : l === it && r._isActive && r._onMove(t)
        }).on("dragend dragcancel draginitup", function(t) {
            var i = l === it;
            _(r._item, t),
            l = U,
            i && r._isActive && r._onEnd(t)
        }),
        o.addEventListener("dragstart", nt, !1)
    }
    function nt(t) {
        t.preventDefault && t.preventDefault()
    }
    function rt(t, i) {
        return t.left + t.width <= i.left || i.left + i.width <= t.left || t.top + t.height <= i.top || i.top + i.height <= t.top ? 0 : (Math.min(t.left + t.width, i.left + i.width) - Math.max(t.left, i.left)) * (Math.min(t.top + t.height, i.top + i.height) - Math.max(t.top, i.top)) / (Math.min(t.width, i.width) * Math.min(t.height, i.height)) * 100
    }
    function ot(t, i) {
        var e = i || []
          , s = t.parentNode;
        if (Q) {
            if ("fixed" === _(t, "position"))
                return e;
            for (; s && s !== document && s !== document.documentElement; )
                ht(s) && e.push(s),
                s = "fixed" === _(s, "position") ? null : s.parentNode;
            return null !== s && e.push(window),
            e
        }
        for (; s && s !== document; )
            "fixed" !== _(t, "position") || T(s) ? (ht(s) && e.push(s),
            t = s,
            s = s.parentNode) : s = s.parentNode;
        return e[e.length - 1] === document.documentElement ? e[e.length - 1] = window : e.push(window),
        e
    }
    function ht(t) {
        var i = _(t, "overflow");
        return "auto" === i || "scroll" === i || ("auto" === (i = _(t, "overflow-x")) || "scroll" === i || ("auto" === (i = _(t, "overflow-y")) || "scroll" === i))
    }
    function at() {
        if (!r)
            return !0;
        if (!document.body)
            return null;
        var t = [0, 1].map(function(t, i) {
            return (t = document.createElement("div")).style.position = i ? "fixed" : "absolute",
            t.style.display = "block",
            t.style.visibility = "hidden",
            t.style.left = i ? "0px" : "1px",
            t.style[h] = "none",
            t
        })
          , i = document.body.appendChild(t[0])
          , e = i.appendChild(t[1])
          , s = e.getBoundingClientRect().left;
        i.style[h] = "scale(1)";
        var n = s === e.getBoundingClientRect().left;
        return document.body.removeChild(i),
        n
    }
    function _t() {
        this._queue = [],
        this._isDestroyed = !1
    }
    function lt(t) {
        this._item = t,
        this._isActive = !1,
        this._isDestroyed = !1,
        this._isInterrupted = !1,
        this._currentStyles = {},
        this._targetStyles = {},
        this._currentLeft = 0,
        this._currentTop = 0,
        this._offsetLeft = 0,
        this._offsetTop = 0,
        this._skipNextAnimation = !1,
        this._animateOptions = {
            onFinish: this._finish.bind(this)
        },
        this._queue = new _t,
        this._setupAnimation = this._setupAnimation.bind(this),
        this._startAnimation = this._startAnimation.bind(this)
    }
    st.defaultStartPredicate = function(t, i, e) {
        var s = t._drag
          , n = s._startPredicateData || s._setupStartPredicate(e);
        if (!i.isFinal)
            return !(!n.handleElement && (n.handleElement = s._getStartPredicateHandle(i),
            !n.handleElement)) && (n.delay && (n.event = i,
            n.delayTimer || (n.delayTimer = window.setTimeout(function() {
                n.delay = 0,
                s._resolveStartPredicate(n.event) && (s._forceResolveStartPredicate(n.event),
                s._resetStartPredicate())
            }, n.delay))),
            s._resolveStartPredicate(i));
        s._finishStartPredicate(i)
    }
    ,
    st.defaultSortPredicate = function() {
        var t = {}
          , i = {}
          , e = {}
          , s = [];
        return function(n, r) {
            var o = n._drag
              , h = o._getGrid()
              , a = r && "number" == typeof r.threshold ? r.threshold : 50
              , _ = r && "swap" === r.action ? "swap" : "move";
            t.width = n._width,
            t.height = n._height,
            t.left = o._elementClientX,
            t.top = o._elementClientY;
            var l = function(e, n, r) {
                var o, h, a, _, l = null, d = n._settings.dragSort, f = -1;
                if (!0 === d ? (s[0] = n,
                h = s) : h = d.call(n, e),
                !Array.isArray(h))
                    return l;
                for (_ = 0; _ < h.length; _++)
                    (a = h[_])._isDestroyed || (a._updateBoundingRect(),
                    i.width = a._width,
                    i.height = a._height,
                    i.left = a._left,
                    i.top = a._top,
                    (o = rt(t, i)) > r && o > f && (f = o,
                    l = a));
                return s.length = 0,
                l
            }(n, h, a);
            if (!l)
                return !1;
            var d, f, u, c, p, m = 0, g = 0, y = -1;
            for (l === h ? (t.left = o._gridX + n._marginLeft,
            t.top = o._gridY + n._marginTop) : (l._updateBorders(1, 0, 1, 0),
            m = l._left + l._borderLeft,
            g = l._top + l._borderTop),
            p = 0; p < l._items.length; p++)
                (u = l._items[p])._isActive && u !== n && (f = !0,
                i.width = u._width,
                i.height = u._height,
                i.left = u._left + u._marginLeft + m,
                i.top = u._top + u._marginTop + g,
                (c = rt(t, i)) > y && (d = p,
                y = c));
            return y < a && n.getGrid() !== l && (d = f ? -1 : 0,
            y = 1 / 0),
            y >= a && (e.grid = l,
            e.index = d,
            e.action = _,
            e)
        }
    }(),
    st.prototype.stop = function() {
        var t = this._item
          , i = t._element
          , e = this._getGrid();
        return this._isActive ? this._isMigrating ? (this._finishMigration(),
        this) : (S(t._id),
        A(t._id),
        this._unbindScrollListeners(),
        this._checkOverlapDebounce("cancel"),
        i.parentNode !== e._element && (e._element.appendChild(i),
        i.style[h] = V(this._gridX, this._gridY)),
        K(i, e._settings.itemDraggingClass),
        this._reset(),
        this) : this
    }
    ,
    st.prototype.destroy = function() {
        return this._isDestroyed ? this : (this.stop(),
        this._hammer.destroy(),
        this._item._element.removeEventListener("dragstart", nt, !1),
        this._isDestroyed = !0,
        this)
    }
    ,
    st.prototype._getGrid = function() {
        return e[this._gridId] || null
    }
    ,
    st.prototype._reset = function() {
        this._isActive = !1,
        this._container = null,
        this._containingBlock = null,
        this._lastEvent = null,
        this._lastScrollEvent = null,
        this._scrollers = [],
        this._left = 0,
        this._top = 0,
        this._gridX = 0,
        this._gridY = 0,
        this._elementClientX = 0,
        this._elementClientY = 0,
        this._containerDiffX = 0,
        this._containerDiffY = 0
    }
    ,
    st.prototype._bindScrollListeners = function() {
        var t, i, e = this._getGrid()._element, s = this._container, n = this._scrollers;
        if (n.length = 0,
        ot(this._item._element, n),
        s !== e)
            for (ot(e, t = []),
            t.push(e),
            i = 0; i < t.length; i++)
                n.indexOf(t[i]) < 0 && n.push(t[i]);
        for (i = 0; i < n.length; i++)
            n[i].addEventListener("scroll", this._onScroll)
    }
    ,
    st.prototype._unbindScrollListeners = function() {
        var t, i = this._scrollers;
        for (t = 0; t < i.length; t++)
            i[t].removeEventListener("scroll", this._onScroll);
        i.length = 0
    }
    ,
    st.prototype._setupStartPredicate = function(t) {
        var i = t || this._getGrid()._settings.dragStartPredicate || 0;
        return this._startPredicateData = {
            distance: Math.abs(i.distance) || 0,
            delay: Math.max(i.delay, 0) || 0,
            handle: "string" == typeof i.handle && i.handle
        }
    }
    ,
    st.prototype._getStartPredicateHandle = function(t) {
        var i = this._startPredicateData
          , e = this._item._element
          , s = e;
        if (!i.handle)
            return s;
        for (s = (t.changedPointers[0] || 0).target; s && !C(s, i.handle); )
            s = s !== e ? s.parentElement : null;
        return s || null
    }
    ,
    st.prototype._resolveStartPredicate = function(t) {
        var i, e, s, n, r, o = this._startPredicateData, h = t.changedPointers[0], a = h && h.pageX || 0, _ = h && h.pageY || 0;
        if (!(t.distance < o.distance || o.delay))
            return e = (i = o.handleElement.getBoundingClientRect()).left + (window.pageXOffset || 0),
            s = i.top + (window.pageYOffset || 0),
            n = i.width,
            r = i.height,
            this._resetStartPredicate(),
            n && r && a >= e && a < e + n && _ >= s && _ < s + r
    }
    ,
    st.prototype._finishStartPredicate = function(t) {
        var i = this._item._element;
        this._resetStartPredicate(),
        function(t) {
            return Math.abs(t.deltaX) < 2 && Math.abs(t.deltaY) < 2 && t.deltaTime < 200
        }(t) && function(t) {
            if ("a" !== t.tagName.toLowerCase())
                return;
            var i = t.getAttribute("href");
            if (!i)
                return;
            var e = t.getAttribute("target");
            e && "_self" !== e ? window.open(i, e) : window.location.href = i
        }(i)
    }
    ,
    st.prototype._resetStartPredicate = function() {
        var t = this._startPredicateData;
        t && (t.delayTimer && (t.delayTimer = window.clearTimeout(t.delayTimer)),
        this._startPredicateData = null)
    }
    ,
    st.prototype._checkOverlap = function() {
        if (this._isActive) {
            var t, i, e, s, n, r, o, h = this._item, a = this._getGrid()._settings;
            (t = "function" == typeof a.dragSortPredicate ? a.dragSortPredicate(h, this._lastEvent) : st.defaultSortPredicate(h, a.dragSortPredicate)) && "number" == typeof t.index && (o = (i = h.getGrid()) !== (s = t.grid || i),
            e = i._items.indexOf(h),
            n = L(s._items, t.index, o),
            r = "swap" === t.action ? "swap" : "move",
            o ? (i._hasListeners("beforeSend") && i._emit("beforeSend", {
                item: h,
                fromGrid: i,
                fromIndex: e,
                toGrid: s,
                toIndex: n
            }),
            s._hasListeners("beforeReceive") && s._emit("beforeReceive", {
                item: h,
                fromGrid: i,
                fromIndex: e,
                toGrid: s,
                toIndex: n
            }),
            h._gridId = s._id,
            this._isMigrating = h._gridId !== this._gridId,
            i._items.splice(e, 1),
            j(s._items, h, n),
            h._sortData = null,
            i._hasListeners("send") && i._emit("send", {
                item: h,
                fromGrid: i,
                fromIndex: e,
                toGrid: s,
                toIndex: n
            }),
            s._hasListeners("receive") && s._emit("receive", {
                item: h,
                fromGrid: i,
                fromIndex: e,
                toGrid: s,
                toIndex: n
            }),
            i.layout(),
            s.layout()) : e !== n && (("swap" === r ? M : E)(i._items, e, n),
            i._hasListeners("move") && i._emit("move", {
                item: h,
                fromIndex: e,
                toIndex: n,
                action: r
            }),
            i.layout()))
        }
    }
    ,
    st.prototype._finishMigration = function() {
        var t, i, e = this._item, s = e._release, n = e._element, r = e._isActive, o = e.getGrid(), a = o._element, _ = o._settings, l = _.dragContainer || a, d = this._getGrid()._settings, u = n.parentNode;
        this._isMigrating = !1,
        this.destroy(),
        K(n, d.itemClass),
        K(n, d.itemVisibleClass),
        K(n, d.itemHiddenClass),
        I(n, _.itemClass),
        I(n, r ? _.itemVisibleClass : _.itemHiddenClass),
        l !== u && (l.appendChild(n),
        i = N(u, l, !0),
        (t = z(n)).x -= i.left,
        t.y -= i.top),
        e._refreshDimensions(),
        e._refreshSortData(),
        i = N(l, a, !0),
        s._containerDiffX = i.left,
        s._containerDiffY = i.top,
        e._drag = _.dragEnabled ? new st(e) : null,
        l !== u && (n.style[h] = V(t.x, t.y)),
        e._child.removeAttribute("style"),
        f(e._child, r ? _.visibleStyles : _.hiddenStyles),
        s.start()
    }
    ,
    st.prototype._onStart = function(t) {
        var i = this._item;
        if (i._isActive) {
            var e, s = i._element, n = this._getGrid(), r = n._settings, o = i._release, a = i._migrate, _ = n._element, l = r.dragContainer || _, d = O(l, !0), f = z(s), u = f.x, c = f.y, p = s.getBoundingClientRect(), m = l !== _;
            m && (e = N(d, _)),
            i.isPositioning() && i._layout.stop(!0, {
                transform: V(u, c)
            }),
            a._isActive && (u -= a._containerDiffX,
            c -= a._containerDiffY,
            a.stop(!0, {
                transform: V(u, c)
            })),
            i.isReleasing() && o._reset(),
            this._isActive = !0,
            this._lastEvent = t,
            this._container = l,
            this._containingBlock = d,
            this._elementClientX = p.left,
            this._elementClientY = p.top,
            this._left = this._gridX = u,
            this._top = this._gridY = c,
            n._emit("dragInit", i, t),
            m && (this._containerDiffX = e.left,
            this._containerDiffY = e.top,
            s.parentNode === l ? (this._gridX = u - this._containerDiffX,
            this._gridY = c - this._containerDiffY) : (this._left = u + this._containerDiffX,
            this._top = c + this._containerDiffY,
            l.appendChild(s),
            s.style[h] = V(this._left, this._top))),
            I(s, r.itemDraggingClass),
            this._bindScrollListeners(),
            n._emit("dragStart", i, t)
        }
    }
    ,
    st.prototype._onMove = function(t) {
        var i = this._item;
        if (i._isActive) {
            var e, s, n, r = this._getGrid()._settings.dragAxis, o = t.deltaX - this._lastEvent.deltaX, h = t.deltaY - this._lastEvent.deltaY;
            this._lastEvent = t,
            "y" !== r && (this._left += o,
            this._gridX += o,
            this._elementClientX += o),
            "x" !== r && (this._top += h,
            this._gridY += h,
            this._elementClientY += h),
            e = i._id,
            s = this._prepareMove,
            n = this._applyMove,
            m.add(e + v, s, n, !0)
        } else
            this.stop()
    }
    ,
    st.prototype._prepareMove = function() {
        this._item._isActive && this._getGrid()._settings.dragSort && this._checkOverlapDebounce()
    }
    ,
    st.prototype._applyMove = function() {
        var t = this._item;
        t._isActive && (t._element.style[h] = V(this._left, this._top),
        this._getGrid()._emit("dragMove", t, this._lastEvent))
    }
    ,
    st.prototype._onScroll = function(t) {
        var i, e, s, n = this._item;
        n._isActive ? (this._lastScrollEvent = t,
        i = n._id,
        e = this._prepareScroll,
        s = this._applyScroll,
        m.add(i + w, e, s, !0)) : this.stop()
    }
    ,
    st.prototype._prepareScroll = function() {
        var t = this._item;
        if (t._isActive) {
            var i, e = t._element, s = this._getGrid(), n = s._settings, r = n.dragAxis, o = s._element, h = e.getBoundingClientRect(), a = this._elementClientX - h.left, _ = this._elementClientY - h.top;
            this._container !== o && (i = N(this._containingBlock, o),
            this._containerDiffX = i.left,
            this._containerDiffY = i.top),
            "y" !== r && (this._left += a,
            this._gridX = this._left - this._containerDiffX),
            "x" !== r && (this._top += _,
            this._gridY = this._top - this._containerDiffY),
            n.dragSort && this._checkOverlapDebounce()
        }
    }
    ,
    st.prototype._applyScroll = function() {
        var t = this._item;
        t._isActive && (t._element.style[h] = V(this._left, this._top),
        this._getGrid()._emit("dragScroll", t, this._lastScrollEvent))
    }
    ,
    st.prototype._onEnd = function(t) {
        var i = this._item
          , e = i._element
          , s = this._getGrid()
          , n = s._settings
          , r = i._release;
        i._isActive ? (S(i._id),
        A(i._id),
        n.dragSort && this._checkOverlapDebounce("finish"),
        this._unbindScrollListeners(),
        r._containerDiffX = this._containerDiffX,
        r._containerDiffY = this._containerDiffY,
        this._reset(),
        K(e, n.itemDraggingClass),
        s._emit("dragEnd", i, t),
        this._isMigrating ? this._finishMigration() : r.start()) : this.stop()
    }
    ,
    _t.prototype.add = function(t) {
        return this._isDestroyed ? this : (this._queue.push(t),
        this)
    }
    ,
    _t.prototype.flush = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e, s = this._queue, n = s.length;
        if (!n)
            return this;
        var r = 1 === n
          , o = r ? s[0] : s.slice(0);
        if (s.length = 0,
        r)
            return o(t, i),
            this;
        for (e = 0; e < n && (o[e](t, i),
        !this._isDestroyed); e++)
            ;
        return this
    }
    ,
    _t.prototype.destroy = function() {
        return this._isDestroyed ? this : (this._isDestroyed = !0,
        this._queue.length = 0,
        this)
    }
    ,
    lt.prototype.start = function(t, i) {
        if (!this._isDestroyed) {
            var e, s, n, r, o = this._item, h = o._element, a = o._release, _ = o.getGrid()._settings, l = this._isActive, d = a._isActive && !1 === a._isPositioningStarted, u = d ? _.dragReleaseDuration : _.layoutDuration, c = d ? _.dragReleaseEasing : _.layoutEasing, p = !t && !this._skipNextAnimation && u > 0;
            return l && this._queue.flush(!0, o),
            d && (a._isPositioningStarted = !0),
            "function" == typeof i && this._queue.add(i),
            p ? (this._isActive = !0,
            this._animateOptions.easing = c,
            this._animateOptions.duration = u,
            this._isInterrupted = l,
            s = o._id,
            n = this._setupAnimation,
            r = this._startAnimation,
            m.add(s + g, n, r),
            this) : (this._updateOffsets(),
            this._updateTargetStyles(),
            l && D(o._id),
            e = o._animate.isAnimating(),
            this.stop(!1, this._targetStyles),
            !e && f(h, this._targetStyles),
            this._skipNextAnimation = !1,
            this._finish())
        }
    }
    ,
    lt.prototype.stop = function(t, i) {
        if (this._isDestroyed || !this._isActive)
            return this;
        var e = this._item;
        return D(e._id),
        e._animate.stop(i),
        K(e._element, e.getGrid()._settings.itemPositioningClass),
        this._isActive = !1,
        t && this._queue.flush(!0, e),
        this
    }
    ,
    lt.prototype.destroy = function() {
        return this._isDestroyed ? this : (this.stop(!0, {}),
        this._queue.destroy(),
        this._item = this._currentStyles = this._targetStyles = this._animateOptions = null,
        this._isDestroyed = !0,
        this)
    }
    ,
    lt.prototype._updateOffsets = function() {
        if (!this._isDestroyed) {
            var t = this._item
              , i = t._migrate
              , e = t._release;
            this._offsetLeft = e._isActive ? e._containerDiffX : i._isActive ? i._containerDiffX : 0,
            this._offsetTop = e._isActive ? e._containerDiffY : i._isActive ? i._containerDiffY : 0
        }
    }
    ,
    lt.prototype._updateTargetStyles = function() {
        if (!this._isDestroyed) {
            var t = this._item;
            this._targetStyles.transform = V(t._left + this._offsetLeft, t._top + this._offsetTop)
        }
    }
    ,
    lt.prototype._finish = function() {
        if (!this._isDestroyed) {
            var t = this._item
              , i = t._migrate
              , e = t._release;
            this._isActive && (this._isActive = !1,
            K(t._element, t.getGrid()._settings.itemPositioningClass)),
            e._isActive && e.stop(),
            i._isActive && i.stop(),
            this._queue.flush(!1, t)
        }
    }
    ,
    lt.prototype._setupAnimation = function() {
        var t = z(this._item._element);
        this._currentLeft = t.x,
        this._currentTop = t.y
    }
    ,
    lt.prototype._startAnimation = function() {
        var t = this._item
          , i = t._element
          , e = t.getGrid()._settings;
        if (this._updateOffsets(),
        this._updateTargetStyles(),
        t._left === this._currentLeft - this._offsetLeft && t._top === this._currentTop - this._offsetTop)
            return this._isInterrupted && this.stop(!1, this._targetStyles),
            this._isActive = !1,
            void this._finish();
        !this._isInterrupted && I(i, e.itemPositioningClass),
        this._currentStyles.transform = V(this._currentLeft, this._currentTop),
        t._animate.start(this._currentStyles, this._targetStyles, this._animateOptions)
    }
    ;
    var dt = {};
    function ft(t) {
        this._item = t,
        this._isActive = !1,
        this._isDestroyed = !1,
        this._container = !1,
        this._containerDiffX = 0,
        this._containerDiffY = 0
    }
    ft.prototype.start = function(t, i, e) {
        if (this._isDestroyed)
            return this;
        var s, n, r, o, a, _, l, d, u = this._item, c = u._element, p = u.isVisible(), m = u.getGrid(), g = m._settings, y = t._settings, v = t._element, w = t._items, D = m._items.indexOf(u), b = e || document.body;
        if ("number" == typeof i)
            s = L(w, i, !0);
        else {
            if (!(n = t._getItem(i)))
                return this;
            s = w.indexOf(n)
        }
        return (u.isPositioning() || this._isActive || u.isReleasing()) && (l = (_ = z(c)).x,
        d = _.y),
        u.isPositioning() && u._layout.stop(!0, {
            transform: V(l, d)
        }),
        this._isActive && (l -= this._containerDiffX,
        d -= this._containerDiffY,
        this.stop(!0, {
            transform: V(l, d)
        })),
        u.isReleasing() && (l -= u._release._containerDiffX,
        d -= u._release._containerDiffY,
        u._release.stop(!0, {
            transform: V(l, d)
        })),
        u._visibility._stopAnimation(),
        u._drag && u._drag.destroy(),
        u._visibility._queue.flush(!0, u),
        m._hasListeners("beforeSend") && m._emit("beforeSend", {
            item: u,
            fromGrid: m,
            fromIndex: D,
            toGrid: t,
            toIndex: s
        }),
        t._hasListeners("beforeReceive") && t._emit("beforeReceive", {
            item: u,
            fromGrid: m,
            fromIndex: D,
            toGrid: t,
            toIndex: s
        }),
        K(c, g.itemClass),
        K(c, g.itemVisibleClass),
        K(c, g.itemHiddenClass),
        I(c, y.itemClass),
        I(c, p ? y.itemVisibleClass : y.itemHiddenClass),
        m._items.splice(D, 1),
        j(w, u, s),
        u._gridId = t._id,
        b !== (r = c.parentNode) && (b.appendChild(c),
        o = N(b, r, !0),
        _ || (l = (_ = z(c)).x,
        d = _.y),
        c.style[h] = V(l + o.left, d + o.top)),
        u._child.removeAttribute("style"),
        f(u._child, p ? y.visibleStyles : y.hiddenStyles),
        c.style.display = p ? "block" : "hidden",
        a = N(b, v, !0),
        u._refreshDimensions(),
        u._refreshSortData(),
        u._drag = y.dragEnabled ? new st(u) : null,
        this._isActive = !0,
        this._container = b,
        this._containerDiffX = a.left,
        this._containerDiffY = a.top,
        m._hasListeners("send") && m._emit("send", {
            item: u,
            fromGrid: m,
            fromIndex: D,
            toGrid: t,
            toIndex: s
        }),
        t._hasListeners("receive") && t._emit("receive", {
            item: u,
            fromGrid: m,
            fromIndex: D,
            toGrid: t,
            toIndex: s
        }),
        this
    }
    ,
    ft.prototype.stop = function(t, i) {
        if (this._isDestroyed || !this._isActive)
            return this;
        var e, s = this._item, n = s._element, r = s.getGrid()._element;
        return this._container !== r && (i || (t ? (e = z(n),
        dt.transform = V(e.x - this._containerDiffX, e.y - this._containerDiffY)) : dt.transform = V(s._left, s._top),
        i = dt),
        r.appendChild(n),
        f(n, i)),
        this._isActive = !1,
        this._container = null,
        this._containerDiffX = 0,
        this._containerDiffY = 0,
        this
    }
    ,
    ft.prototype.destroy = function() {
        return this._isDestroyed ? this : (this.stop(!0),
        this._item = null,
        this._isDestroyed = !0,
        this)
    }
    ;
    var ut = {};
    function ct(t) {
        this._item = t,
        this._isActive = !1,
        this._isDestroyed = !1,
        this._isPositioningStarted = !1,
        this._containerDiffX = 0,
        this._containerDiffY = 0
    }
    function pt(t) {
        var i = t._isActive
          , e = t._element
          , s = t.getGrid()._settings;
        this._item = t,
        this._isDestroyed = !1,
        this._isHidden = !i,
        this._isHiding = !1,
        this._isShowing = !1,
        this._queue = new _t,
        this._finishShow = this._finishShow.bind(this),
        this._finishHide = this._finishHide.bind(this),
        e.style.display = i ? "block" : "none",
        I(e, i ? s.itemVisibleClass : s.itemHiddenClass),
        f(t._child, i ? s.visibleStyles : s.hiddenStyles)
    }
    ct.prototype.start = function() {
        if (this._isDestroyed || this._isActive)
            return this;
        var t = this._item
          , i = t.getGrid();
        return this._isActive = !0,
        I(t._element, i._settings.itemReleasingClass),
        i._emit("dragReleaseStart", t),
        t._layout.start(!1),
        this
    }
    ,
    ct.prototype.stop = function(t, i) {
        if (this._isDestroyed || !this._isActive)
            return this;
        var e, s = this._item, n = s._element, r = s.getGrid(), o = r._element;
        return this._reset(),
        n.parentNode !== o && (i || (t ? (e = z(n),
        ut.transform = V(e.x - this._containerDiffX, e.y - this._containerDiffY)) : ut.transform = V(s._left, s._top),
        i = ut),
        o.appendChild(n),
        f(n, i)),
        t || r._emit("dragReleaseEnd", s),
        this
    }
    ,
    ct.prototype.destroy = function() {
        return this._isDestroyed ? this : (this.stop(!0),
        this._item = null,
        this._isDestroyed = !0,
        this)
    }
    ,
    ct.prototype._reset = function() {
        if (!this._isDestroyed) {
            var t = this._item;
            this._isActive = !1,
            this._isPositioningStarted = !1,
            this._containerDiffX = 0,
            this._containerDiffY = 0,
            K(t._element, t.getGrid()._settings.itemReleasingClass)
        }
    }
    ,
    pt.prototype.show = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e = this._item
          , s = e._element
          , n = this._queue
          , r = "function" == typeof i ? i : null
          , o = e.getGrid()._settings;
        return this._isShowing || this._isHidden ? this._isShowing && !t ? (r && n.add(r),
        this) : (this._isShowing || (n.flush(!0, e),
        K(s, o.itemHiddenClass),
        I(s, o.itemVisibleClass),
        this._isHiding || (s.style.display = "block")),
        r && n.add(r),
        e._isActive = this._isShowing = !0,
        this._isHiding = this._isHidden = !1,
        this._startAnimation(!0, t, this._finishShow),
        this) : (r && r(!1, e),
        this)
    }
    ,
    pt.prototype.hide = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e = this._item
          , s = e._element
          , n = this._queue
          , r = "function" == typeof i ? i : null
          , o = e.getGrid()._settings;
        return !this._isHiding && this._isHidden ? (r && r(!1, e),
        this) : this._isHiding && !t ? (r && n.add(r),
        this) : (this._isHiding || (n.flush(!0, e),
        I(s, o.itemHiddenClass),
        K(s, o.itemVisibleClass)),
        r && n.add(r),
        this._isHidden = this._isHiding = !0,
        e._isActive = this._isShowing = !1,
        this._startAnimation(!1, t, this._finishHide),
        this)
    }
    ,
    pt.prototype.destroy = function() {
        if (this._isDestroyed)
            return this;
        var t = this._item
          , i = t._element
          , e = t.getGrid()
          , s = this._queue
          , n = e._settings;
        return this._stopAnimation({}),
        s.flush(!0, t).destroy(),
        K(i, n.itemVisibleClass),
        K(i, n.itemHiddenClass),
        this._item = null,
        this._isHiding = this._isShowing = !1,
        this._isDestroyed = this._isHidden = !0,
        this
    }
    ,
    pt.prototype._startAnimation = function(t, i, e) {
        if (!this._isDestroyed) {
            var s, n = this._item, r = n.getGrid()._settings, o = t ? r.visibleStyles : r.hiddenStyles, h = parseInt(t ? r.showDuration : r.hideDuration) || 0, a = (t ? r.showEasing : r.hideEasing) || "ease", l = i || h <= 0;
            if (o) {
                if (b(n._id),
                l)
                    return n._animateChild.isAnimating() ? n._animateChild.stop(o) : f(n._child, o),
                    void (e && e());
                var u, c, p;
                u = n._id,
                c = function() {
                    s = function(t, i) {
                        var e = {};
                        for (var s in i)
                            e[s] = _(t, d(s));
                        return e
                    }(n._child, o)
                }
                ,
                p = function() {
                    n._animateChild.start(s, o, {
                        duration: h,
                        easing: a,
                        onFinish: e
                    })
                }
                ,
                m.add(u + y, c, p)
            } else
                e && e()
        }
    }
    ,
    pt.prototype._stopAnimation = function(t) {
        if (!this._isDestroyed) {
            var i = this._item;
            b(i._id),
            i._animateChild.stop(t)
        }
    }
    ,
    pt.prototype._finishShow = function() {
        this._isHidden || (this._isShowing = !1,
        this._queue.flush(!1, this._item))
    }
    ;
    var mt = {};
    pt.prototype._finishHide = function() {
        if (this._isHidden) {
            var t = this._item;
            this._isHiding = !1,
            mt.transform = V(0, 0),
            t._layout.stop(!0, mt),
            t._element.style.display = "none",
            this._queue.flush(!1, t)
        }
    }
    ;
    var gt, yt, vt, wt, Dt = 0;
    function bt() {
        return ++Dt
    }
    function St(t, i, e) {
        var s = t._settings;
        this._id = bt(),
        this._gridId = t._id,
        this._isDestroyed = !1,
        this._left = 0,
        this._top = 0,
        this._element = i,
        this._child = i.children[0],
        i.parentNode !== t._element && t._element.appendChild(i),
        I(i, s.itemClass),
        "boolean" != typeof e && (e = "none" !== _(i, "display")),
        this._isActive = e,
        i.style.left = "0",
        i.style.top = "0",
        i.style[h] = V(0, 0),
        this._animate = new u(i),
        this._animateChild = new u(this._child),
        this._visibility = new pt(this),
        this._layout = new lt(this),
        this._migrate = new ft(this),
        this._release = new ct(this),
        this._drag = s.dragEnabled ? new st(this) : null,
        this._refreshDimensions(),
        this._refreshSortData()
    }
    function At() {
        this._slots = [],
        this._slotSizes = [],
        this._freeSlots = [],
        this._newSlots = [],
        this._rectItem = {},
        this._rectStore = [],
        this._rectId = 0,
        this._layout = {
            slots: null,
            setWidth: !1,
            setHeight: !1,
            width: !1,
            height: !1
        },
        this._sortRectsLeftTop = this._sortRectsLeftTop.bind(this),
        this._sortRectsTopLeft = this._sortRectsTopLeft.bind(this)
    }
    St.prototype.getGrid = function() {
        return e[this._gridId]
    }
    ,
    St.prototype.getElement = function() {
        return this._element
    }
    ,
    St.prototype.getWidth = function() {
        return this._width
    }
    ,
    St.prototype.getHeight = function() {
        return this._height
    }
    ,
    St.prototype.getMargin = function() {
        return {
            left: this._marginLeft,
            right: this._marginRight,
            top: this._marginTop,
            bottom: this._marginBottom
        }
    }
    ,
    St.prototype.getPosition = function() {
        return {
            left: this._left,
            top: this._top
        }
    }
    ,
    St.prototype.isActive = function() {
        return this._isActive
    }
    ,
    St.prototype.isVisible = function() {
        return !!this._visibility && !this._visibility._isHidden
    }
    ,
    St.prototype.isShowing = function() {
        return !(!this._visibility || !this._visibility._isShowing)
    }
    ,
    St.prototype.isHiding = function() {
        return !(!this._visibility || !this._visibility._isHiding)
    }
    ,
    St.prototype.isPositioning = function() {
        return !(!this._layout || !this._layout._isActive)
    }
    ,
    St.prototype.isDragging = function() {
        return !(!this._drag || !this._drag._isActive)
    }
    ,
    St.prototype.isReleasing = function() {
        return !(!this._release || !this._release._isActive)
    }
    ,
    St.prototype.isDestroyed = function() {
        return this._isDestroyed
    }
    ,
    St.prototype._refreshDimensions = function() {
        if (!this._isDestroyed && !this._visibility._isHidden) {
            var t = this._element
              , i = t.getBoundingClientRect();
            this._width = i.width,
            this._height = i.height,
            this._marginLeft = Math.max(0, k(t, "margin-left")),
            this._marginRight = Math.max(0, k(t, "margin-right")),
            this._marginTop = Math.max(0, k(t, "margin-top")),
            this._marginBottom = Math.max(0, k(t, "margin-bottom"))
        }
    }
    ,
    St.prototype._refreshSortData = function() {
        if (!this._isDestroyed) {
            var t, i = this._sortData = {}, e = this.getGrid()._settings.sortData;
            for (t in e)
                i[t] = e[t](this, this._element)
        }
    }
    ,
    St.prototype._destroy = function(t) {
        if (!this._isDestroyed) {
            var i = this._element
              , e = this.getGrid()
              , s = e._settings
              , n = e._items.indexOf(this);
            this._release.destroy(),
            this._migrate.destroy(),
            this._layout.destroy(),
            this._visibility.destroy(),
            this._animate.destroy(),
            this._animateChild.destroy(),
            this._drag && this._drag.destroy(),
            i.removeAttribute("style"),
            this._child.removeAttribute("style"),
            K(i, s.itemClass),
            n > -1 && e._items.splice(n, 1),
            t && i.parentNode.removeChild(i),
            this._isActive = !1,
            this._isDestroyed = !0
        }
    }
    ,
    At.prototype.getLayout = function(t, i, e, s, n) {
        var r, o = this._layout, h = !(!n || !n.fillGaps), a = !(!n || !n.horizontal), _ = !(!n || !n.alignRight), l = !(!n || !n.alignBottom), d = !(!n || !n.rounding), f = this._slotSizes;
        if (o.slots = s || this._slots,
        o.width = a ? 0 : d ? Math.round(i) : i,
        o.height = a ? d ? Math.round(e) : e : 0,
        o.setWidth = a,
        o.setHeight = !a,
        o.slots.length = 0,
        f.length = 0,
        !t.length)
            return o;
        for (r = 0; r < t.length; r++)
            this._addSlot(t[r], a, h, d, _ || l);
        if (_)
            for (r = 0; r < o.slots.length; r += 2)
                o.slots[r] = o.width - (o.slots[r] + f[r]);
        if (l)
            for (r = 1; r < o.slots.length; r += 2)
                o.slots[r] = o.height - (o.slots[r] + f[r]);
        return f.length = 0,
        this._freeSlots.length = 0,
        this._newSlots.length = 0,
        this._rectId = 0,
        o
    }
    ,
    At.prototype._addSlot = (gt = {},
    function(t, i, e, s, n) {
        var r, o, h, a, _, l, d = this._layout, f = this._freeSlots, u = this._newSlots;
        for (u.length = 0,
        gt.left = null,
        gt.top = null,
        gt.width = t._width + t._marginLeft + t._marginRight,
        gt.height = t._height + t._marginTop + t._marginBottom,
        s && (gt.width = Math.round(gt.width),
        gt.height = Math.round(gt.height)),
        _ = 0; _ < f.length; _++)
            if ((o = f[_]) && (r = this._getRect(o),
            gt.width <= r.width + .001 && gt.height <= r.height + .001)) {
                gt.left = r.left,
                gt.top = r.top;
                break
            }
        for (null === gt.left && (gt.left = i ? d.width : 0,
        gt.top = i ? 0 : d.height,
        e || (a = !0)),
        !i && gt.top + gt.height > d.height && (gt.left > 0 && u.push(this._addRect(0, d.height, gt.left, 1 / 0)),
        gt.left + gt.width < d.width && u.push(this._addRect(gt.left + gt.width, d.height, d.width - gt.left - gt.width, 1 / 0)),
        d.height = gt.top + gt.height),
        i && gt.left + gt.width > d.width && (gt.top > 0 && u.push(this._addRect(d.width, 0, 1 / 0, gt.top)),
        gt.top + gt.height < d.height && u.push(this._addRect(d.width, gt.top + gt.height, 1 / 0, d.height - gt.top - gt.height)),
        d.width = gt.left + gt.width),
        _ = e ? 0 : a ? f.length : _; _ < f.length; _++)
            if (o = f[_])
                for (r = this._getRect(o),
                h = this._splitRect(r, gt),
                l = 0; l < h.length; l++)
                    o = h[l],
                    (r = this._getRect(o)).width > .49 && r.height > .49 && (!i && r.top < d.height || i && r.left < d.width) && u.push(o);
        u.length && this._purgeRects(u).sort(i ? this._sortRectsLeftTop : this._sortRectsTopLeft),
        i ? d.width = Math.max(d.width, gt.left + gt.width) : d.height = Math.max(d.height, gt.top + gt.height),
        d.slots.push(gt.left, gt.top),
        n && this._slotSizes.push(gt.width, gt.height),
        this._freeSlots = u,
        this._newSlots = f
    }
    ),
    At.prototype._addRect = function(t, i, e, s) {
        var n = ++this._rectId
          , r = this._rectStore;
        return r[n] = t || 0,
        r[++this._rectId] = i || 0,
        r[++this._rectId] = e || 0,
        r[++this._rectId] = s || 0,
        n
    }
    ,
    At.prototype._getRect = function(t, i) {
        var e = i || this._rectItem
          , s = this._rectStore;
        return e.left = s[t] || 0,
        e.top = s[++t] || 0,
        e.width = s[++t] || 0,
        e.height = s[++t] || 0,
        e
    }
    ,
    At.prototype._splitRect = (yt = [],
    function(t, i) {
        return yt.length = 0,
        this._doRectsOverlap(t, i) ? (t.left < i.left && yt.push(this._addRect(t.left, t.top, i.left - t.left, t.height)),
        t.left + t.width > i.left + i.width && yt.push(this._addRect(i.left + i.width, t.top, t.left + t.width - (i.left + i.width), t.height)),
        t.top < i.top && yt.push(this._addRect(t.left, t.top, t.width, i.top - t.top)),
        t.top + t.height > i.top + i.height && yt.push(this._addRect(t.left, i.top + i.height, t.width, t.top + t.height - (i.top + i.height))),
        yt) : (yt.push(this._addRect(t.left, t.top, t.width, t.height)),
        yt)
    }
    ),
    At.prototype._doRectsOverlap = function(t, i) {
        return !(t.left + t.width <= i.left || i.left + i.width <= t.left || t.top + t.height <= i.top || i.top + i.height <= t.top)
    }
    ,
    At.prototype._isRectWithinRect = function(t, i) {
        return t.left >= i.left && t.top >= i.top && t.left + t.width <= i.left + i.width && t.top + t.height <= i.top + i.height
    }
    ,
    At.prototype._purgeRects = (vt = {},
    wt = {},
    function(t) {
        for (var i, e = t.length; e--; )
            if (i = t.length,
            t[e])
                for (this._getRect(t[e], vt); i--; )
                    if (t[i] && e !== i && this._isRectWithinRect(vt, this._getRect(t[i], wt))) {
                        t[e] = 0;
                        break
                    }
        return t
    }
    ),
    At.prototype._sortRectsTopLeft = function() {
        var t = {}
          , i = {};
        return function(e, s) {
            return this._getRect(e, t),
            this._getRect(s, i),
            t.top < i.top ? -1 : t.top > i.top ? 1 : t.left < i.left ? -1 : t.left > i.left ? 1 : 0
        }
    }(),
    At.prototype._sortRectsLeftTop = function() {
        var t = {}
          , i = {};
        return function(e, s) {
            return this._getRect(e, t),
            this._getRect(s, i),
            t.left < i.left ? -1 : t.left > i.left ? 1 : t.top < i.top ? -1 : t.top > i.top ? 1 : 0
        }
    }();
    var xt = "[object HTMLCollection]"
      , Rt = "[object NodeList]";
    function Ct(t) {
        var i = Object.prototype.toString.call(t);
        return i === xt || i === Rt
    }
    function It(t) {
        return Ct(t) ? Array.prototype.slice.call(t) : Array.prototype.concat(t)
    }
    var Lt = new At
      , Et = function() {};
    function Mt(t, i) {
        var s, r, o, h = this;
        if (t = this._element = "string" == typeof t ? document.querySelector(t) : t,
        !document.body.contains(t))
            throw new Error("Container element must be an existing DOM element");
        "function" != typeof (s = this._settings = function(t, i) {
            var e = Ht({}, t);
            i && (e = Ht(e, i));
            return e.visibleStyles = (i || 0).visibleStyles || (t || 0).visibleStyles,
            e.hiddenStyles = (i || 0).hiddenStyles || (t || 0).hiddenStyles,
            e
        }(Mt.defaultOptions, i)).dragSort && (s.dragSort = !!s.dragSort),
        this._id = bt(),
        e[this._id] = h,
        this._isDestroyed = !1,
        this._layout = {
            id: 0,
            items: [],
            slots: [],
            setWidth: !1,
            setHeight: !1,
            width: 0,
            height: 0
        },
        this._emitter = new n,
        I(t, s.containerClass),
        this._items = [],
        "string" == typeof (r = s.items) ? It(t.children).forEach(function(t) {
            ("*" === r || C(t, r)) && h._items.push(new St(h,t))
        }) : (Array.isArray(r) || Ct(r)) && (this._items = It(r).map(function(t) {
            return new St(h,t)
        })),
        "number" != typeof (o = s.layoutOnResize) && (o = !0 === o ? 0 : -1),
        o >= 0 && window.addEventListener("resize", h._resizeHandler = P(function() {
            h.refreshItems().layout()
        }, o)),
        s.layoutOnInit && this.layout(!0)
    }
    function Ht(t, i) {
        var e, s, n, r = Object.keys(i), o = r.length;
        for (n = 0; n < o; n++)
            e = J(i[s = r[n]]),
            J(t[s]) && e ? t[s] = Ht(Ht({}, t[s]), i[s]) : e ? t[s] = Ht({}, i[s]) : Array.isArray(i[s]) ? t[s] = i[s].slice(0) : t[s] = i[s];
        return t
    }
    return Mt.Item = St,
    Mt.ItemLayout = lt,
    Mt.ItemVisibility = pt,
    Mt.ItemRelease = ct,
    Mt.ItemMigrate = ft,
    Mt.ItemAnimate = u,
    Mt.ItemDrag = st,
    Mt.Emitter = n,
    Mt.defaultOptions = {
        items: "*",
        showDuration: 300,
        showEasing: "ease",
        hideDuration: 300,
        hideEasing: "ease",
        visibleStyles: {
            opacity: "1",
            transform: "scale(1)"
        },
        hiddenStyles: {
            opacity: "0",
            transform: "scale(0.5)"
        },
        layout: {
            fillGaps: !1,
            horizontal: !1,
            alignRight: !1,
            alignBottom: !1,
            rounding: !0
        },
        layoutOnResize: 100,
        layoutOnInit: !0,
        layoutDuration: 300,
        layoutEasing: "ease",
        sortData: null,
        dragEnabled: !1,
        dragContainer: null,
        dragStartPredicate: {
            distance: 0,
            delay: 0,
            handle: !1
        },
        dragAxis: null,
        dragSort: !0,
        dragSortInterval: 100,
        dragSortPredicate: {
            threshold: 50,
            action: "move"
        },
        dragReleaseDuration: 300,
        dragReleaseEasing: "ease",
        dragHammerSettings: {
            touchAction: "none"
        },
        containerClass: "muuri",
        itemClass: "muuri-item",
        itemVisibleClass: "muuri-item-shown",
        itemHiddenClass: "muuri-item-hidden",
        itemPositioningClass: "muuri-item-positioning",
        itemDraggingClass: "muuri-item-dragging",
        itemReleasingClass: "muuri-item-releasing"
    },
    Mt.prototype.on = function(t, i) {
        return this._emitter.on(t, i),
        this
    }
    ,
    Mt.prototype.once = function(t, i) {
        return this._emitter.once(t, i),
        this
    }
    ,
    Mt.prototype.off = function(t, i) {
        return this._emitter.off(t, i),
        this
    }
    ,
    Mt.prototype.getElement = function() {
        return this._element
    }
    ,
    Mt.prototype.getItems = function(t) {
        if (this._isDestroyed || !t && 0 !== t)
            return this._items.slice(0);
        var i, e, s = [], n = It(t);
        for (e = 0; e < n.length; e++)
            (i = this._getItem(n[e])) && s.push(i);
        return s
    }
    ,
    Mt.prototype.refreshItems = function(t) {
        if (this._isDestroyed)
            return this;
        var i, e = this.getItems(t);
        for (i = 0; i < e.length; i++)
            e[i]._refreshDimensions();
        return this
    }
    ,
    Mt.prototype.refreshSortData = function(t) {
        if (this._isDestroyed)
            return this;
        var i, e = this.getItems(t);
        for (i = 0; i < e.length; i++)
            e[i]._refreshSortData();
        return this
    }
    ,
    Mt.prototype.synchronize = function() {
        if (this._isDestroyed)
            return this;
        var t, i, e, s = this._element, n = this._items;
        if (n.length) {
            for (e = 0; e < n.length; e++)
                (i = n[e]._element).parentNode === s && (t = t || document.createDocumentFragment()).appendChild(i);
            t && s.appendChild(t)
        }
        return this._emit("synchronize"),
        this
    }
    ,
    Mt.prototype.layout = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e, n, r, o = this, h = this._element, a = this._updateLayout(), l = a.id, d = a.items.length, f = d, u = "function" == typeof t ? t : i, c = "function" == typeof u, p = c ? a.items.slice(0) : null;
        function m() {
            if (!(--f > 0)) {
                var t = o._layout.id !== l;
                c && u(t, p),
                !t && o._hasListeners(s) && o._emit(s, a.items.slice(0))
            }
        }
        if ((a.setHeight && "number" == typeof a.height || a.setWidth && "number" == typeof a.width) && (e = "border-box" === _(h, "box-sizing")),
        a.setHeight && ("number" == typeof a.height ? h.style.height = (e ? a.height + this._borderTop + this._borderBottom : a.height) + "px" : h.style.height = a.height),
        a.setWidth && ("number" == typeof a.width ? h.style.width = (e ? a.width + this._borderLeft + this._borderRight : a.width) + "px" : h.style.width = a.width),
        this._hasListeners("layoutStart") && this._emit("layoutStart", a.items.slice(0)),
        !d)
            return m(),
            this;
        for (r = 0; r < d; r++)
            (n = a.items[r]) && (n._left = a.slots[2 * r],
            n._top = a.slots[2 * r + 1],
            n.isDragging() ? m() : n._layout.start(!0 === t, m));
        return this
    }
    ,
    Mt.prototype.add = function(t, i) {
        if (this._isDestroyed || !t)
            return [];
        var e = It(t);
        if (!e.length)
            return e;
        var s, n, r = i || 0, o = r.layout ? r.layout : void 0 === r.layout, h = this._items, a = !1;
        for (n = 0; n < e.length; n++)
            s = new St(this,e[n],r.isActive),
            e[n] = s,
            s._isActive && (a = !0,
            s._layout._skipNextAnimation = !0);
        return j(h, e, r.index),
        this._hasListeners("add") && this._emit("add", e.slice(0)),
        a && o && this.layout("instant" === o, "function" == typeof o ? o : void 0),
        e
    }
    ,
    Mt.prototype.remove = function(t, i) {
        if (this._isDestroyed)
            return this;
        var e, s, n = i || 0, r = n.layout ? n.layout : void 0 === n.layout, o = !1, h = this.getItems(), a = this.getItems(t), _ = [];
        for (s = 0; s < a.length; s++)
            e = a[s],
            _.push(h.indexOf(e)),
            e._isActive && (o = !0),
            e._destroy(n.removeElements);
        return this._hasListeners("remove") && this._emit("remove", a.slice(0), _),
        o && r && this.layout("instant" === r, "function" == typeof r ? r : void 0),
        a
    }
    ,
    Mt.prototype.show = function(t, i) {
        return this._isDestroyed ? this : (this._setItemsVisibility(t, !0, i),
        this)
    }
    ,
    Mt.prototype.hide = function(t, i) {
        return this._isDestroyed ? this : (this._setItemsVisibility(t, !1, i),
        this)
    }
    ,
    Mt.prototype.filter = function(t, i) {
        if (this._isDestroyed || !this._items.length)
            return this;
        var e, s, n = [], r = [], o = "string" == typeof t, h = "function" == typeof t, a = i || 0, _ = !0 === a.instant, l = a.layout ? a.layout : void 0 === a.layout, d = "function" == typeof a.onFinish ? a.onFinish : null, f = -1, u = Et;
        if (d && (u = function() {
            ++f && d(n.slice(0), r.slice(0))
        }
        ),
        h || o)
            for (s = 0; s < this._items.length; s++)
                e = this._items[s],
                (h ? t(e) : C(e._element, t)) ? n.push(e) : r.push(e);
        return n.length ? this.show(n, {
            instant: _,
            onFinish: u,
            layout: !1
        }) : u(),
        r.length ? this.hide(r, {
            instant: _,
            onFinish: u,
            layout: !1
        }) : u(),
        (n.length || r.length) && (this._hasListeners("filter") && this._emit("filter", n.slice(0), r.slice(0)),
        l && this.layout("instant" === l, "function" == typeof l ? l : void 0)),
        this
    }
    ,
    Mt.prototype.sort = function() {
        var t, e, s, n;
        function r(t) {
            for (var i = {}, e = 0; e < t.length; e++)
                i[t[e]._id] = e;
            return i
        }
        function o(t, i) {
            var s = n[t._id]
              , r = n[i._id];
            return e ? r - s : s - r
        }
        function h(i, h) {
            for (var a, _, l, d, f = 0, u = 0; u < t.length; u++)
                if (a = t[u][0],
                _ = t[u][1],
                l = (i._sortData ? i : i._refreshSortData())._sortData[a],
                d = (h._sortData ? h : h._refreshSortData())._sortData[a],
                f = "desc" === _ || !_ && e ? d < l ? -1 : d > l ? 1 : 0 : l < d ? -1 : l > d ? 1 : 0)
                    return f;
            return f || (n || (n = r(s)),
            f = o(i, h)),
            f
        }
        function a(i, h) {
            var a = t(i, h);
            return e && a && (a = -a),
            a || (n || (n = r(s)),
            o(i, h))
        }
        return function(r, o) {
            if (this._isDestroyed || this._items.length < 2)
                return this;
            var _, l = this._items, d = o || 0, f = d.layout ? d.layout : void 0 === d.layout;
            if (t = r,
            e = !!d.descending,
            s = l.slice(0),
            n = null,
            "function" == typeof t)
                l.sort(a);
            else if ("string" == typeof t)
                t = r.trim().split(" ").map(function(t) {
                    return t.split(":")
                }),
                l.sort(h);
            else {
                if (!Array.isArray(t))
                    return this;
                if (t.length !== l.length)
                    throw new Error("[" + i + "] sort reference items do not match with grid items.");
                for (_ = 0; _ < l.length; _++) {
                    if (t.indexOf(l[_]) < 0)
                        throw new Error("[" + i + "] sort reference items do not match with grid items.");
                    l[_] = t[_]
                }
                e && l.reverse()
            }
            return this._hasListeners("sort") && this._emit("sort", l.slice(0), s),
            f && this.layout("instant" === f, "function" == typeof f ? f : void 0),
            this
        }
    }(),
    Mt.prototype.move = function(t, i, e) {
        if (this._isDestroyed || this._items.length < 2)
            return this;
        var s, n, r = this._items, o = e || 0, h = o.layout ? o.layout : void 0 === o.layout, a = "swap" === o.action, _ = a ? "swap" : "move", l = this._getItem(t), d = this._getItem(i);
        return l && d && l !== d && (s = r.indexOf(l),
        n = r.indexOf(d),
        a ? M(r, s, n) : E(r, s, n),
        this._hasListeners("move") && this._emit("move", {
            item: l,
            fromIndex: s,
            toIndex: n,
            action: _
        }),
        h && this.layout("instant" === h, "function" == typeof h ? h : void 0)),
        this
    }
    ,
    Mt.prototype.send = function(t, i, e, s) {
        if (this._isDestroyed || i._isDestroyed || this === i)
            return this;
        if (!(t = this._getItem(t)))
            return this;
        var n = s || 0
          , r = n.appendTo || document.body
          , o = n.layoutSender ? n.layoutSender : void 0 === n.layoutSender
          , h = n.layoutReceiver ? n.layoutReceiver : void 0 === n.layoutReceiver;
        return t._migrate.start(i, e, r),
        t._migrate._isActive && t._isActive && (o && this.layout("instant" === o, "function" == typeof o ? o : void 0),
        h && i.layout("instant" === h, "function" == typeof h ? h : void 0)),
        this
    }
    ,
    Mt.prototype.destroy = function(t) {
        if (this._isDestroyed)
            return this;
        var i, s = this._element, n = this._items.slice(0);
        for (this._resizeHandler && window.removeEventListener("resize", this._resizeHandler),
        i = 0; i < n.length; i++)
            n[i]._destroy(t);
        return K(s, this._settings.containerClass),
        s.style.height = "",
        s.style.width = "",
        this._emit("destroy"),
        this._emitter.destroy(),
        e[this._id] = void 0,
        this._isDestroyed = !0,
        this
    }
    ,
    Mt.prototype._getItem = function(t) {
        if (this._isDestroyed || !t && 0 !== t)
            return null;
        if ("number" == typeof t)
            return this._items[t > -1 ? t : this._items.length + t] || null;
        if (t instanceof St)
            return t._gridId === this._id ? t : null;
        for (var i = 0; i < this._items.length; i++)
            if (this._items[i]._element === t)
                return this._items[i];
        return null
    }
    ,
    Mt.prototype._updateLayout = function() {
        var t, i, e, s, n = this._layout, r = this._settings.layout;
        for (++n.id,
        n.items.length = 0,
        s = 0; s < this._items.length; s++)
            this._items[s]._isActive && n.items.push(this._items[s]);
        return this._refreshDimensions(),
        t = this._width - this._borderLeft - this._borderRight,
        i = this._height - this._borderTop - this._borderBottom,
        e = "function" == typeof r ? r(n.items, t, i) : Lt.getLayout(n.items, t, i, n.slots, r),
        n.slots = e.slots,
        n.setWidth = Boolean(e.setWidth),
        n.setHeight = Boolean(e.setHeight),
        n.width = e.width,
        n.height = e.height,
        n
    }
    ,
    Mt.prototype._emit = function() {
        this._isDestroyed || this._emitter.emit.apply(this._emitter, arguments)
    }
    ,
    Mt.prototype._hasListeners = function(t) {
        var i = this._emitter._events[t];
        return !(!i || !i.length)
    }
    ,
    Mt.prototype._updateBoundingRect = function() {
        var t = this._element.getBoundingClientRect();
        this._width = t.width,
        this._height = t.height,
        this._left = t.left,
        this._top = t.top
    }
    ,
    Mt.prototype._updateBorders = function(t, i, e, s) {
        var n = this._element;
        t && (this._borderLeft = k(n, "border-left-width")),
        i && (this._borderRight = k(n, "border-right-width")),
        e && (this._borderTop = k(n, "border-top-width")),
        s && (this._borderBottom = k(n, "border-bottom-width"))
    }
    ,
    Mt.prototype._refreshDimensions = function() {
        this._updateBoundingRect(),
        this._updateBorders(1, 1, 1, 1)
    }
    ,
    Mt.prototype._setItemsVisibility = function(t, i, e) {
        var s, n, r = this, o = this.getItems(t), h = e || 0, a = !0 === h.instant, _ = h.onFinish, l = h.layout ? h.layout : void 0 === h.layout, d = o.length, f = i ? "showStart" : "hideStart", u = i ? "showEnd" : "hideEnd", c = i ? "show" : "hide", p = !1, m = [], g = [];
        if (d) {
            for (this._hasListeners(f) && this._emit(f, o.slice(0)),
            n = 0; n < o.length; n++)
                s = o[n],
                (i && !s._isActive || !i && s._isActive) && (p = !0),
                i && !s._isActive && (s._layout._skipNextAnimation = !0),
                i && s._visibility._isHidden && g.push(s),
                s._visibility[c](a, function(t, i) {
                    t || m.push(i),
                    --d < 1 && ("function" == typeof _ && _(m.slice(0)),
                    r._hasListeners(u) && r._emit(u, m.slice(0)))
                });
            g.length && this.refreshItems(g),
            p && l && this.layout("instant" === l, "function" == typeof l ? l : void 0)
        } else
            "function" == typeof _ && _(o)
    }
    ,
    Mt
});
